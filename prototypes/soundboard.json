{
	"config": {},
	"libraries": [],
	"includes": [
		[
			"Clip",
			[
				"var Clip = function( url ) {",
				"",
				"\tvar scope = this;",
				"",
				"\tthis._callbacks = [];",
				"",
				"\tthis.url = url;",
				"\tthis.binary = null;",
				"\tthis.buffer = null;",
				"\tthis.ended = function() {",
				"\t\tscope.playing = false;",
				"\t};",
				"\t",
				"\tClip.load( url, function( binary ) {",
				"",
				"\t\tscope._ready = true;",
				"\t\tscope.binary = binary;",
				"",
				"\t\tfor ( var i = 0; i < scope._callbacks.length; i++ ) {",
				"\t\t\tscope._callbacks[i].call( scope );",
				"\t\t}",
				"",
				"\t\tscope._callbacks.length = 0;",
				"",
				"\t} );",
				"",
				"};",
				"",
				"Clip.prototype.playing = false;",
				"",
				"Clip.prototype.play = function( ctx, t ) {",
				"",
				"\tvar scope = this;",
				"\tvar time = t || 0;",
				"\t",
				"\tvar play = function() {",
				"",
				"\t\tvar source = ctx.createBufferSource();",
				"\t\tsource.onended = scope.ended;",
				"\t\tsource.buffer = scope.buffer;",
				"\t\tsource.connect( ctx.destination );",
				"",
				"\t\tif ( source.start ) {",
				"\t\t\tsource.start( time );",
				"\t\t} else {",
				"\t\t\tsource.noteOn( time );",
				"\t\t}",
				"",
				"\t\tif ( scope.source ) {",
				"\t\t\tscope.source.onended = null;",
				"\t\t}\t\t",
				"",
				"\t\tif ( scope.timeout ) {",
				"\t\t\tclearTimeout( scope.timeout );",
				"\t\t\tdelete scope.timeout;",
				"\t\t}",
				"",
				"\t\t// TODO: Need to manage this and",
				"\t\t// keep control the creation / deletion?",
				"\t\tscope.timeout = setTimeout( function() {",
				"",
				"\t\t\tscope.source = source;",
				"\t\t\tscope.playing = true;",
				"\t\t\tscope.startTime = time;",
				"",
				"\t\t}, 1000 * Math.max( time - ctx.currentTime, 0 ) ); ",
				"",
				"\t};",
				"\t",
				"\tif ( this.buffer ) {",
				"",
				"\t\tplay();",
				"",
				"\t} else {",
				"",
				"\t\tvar success = function( buffer ) {",
				"\t\t\tscope.buffer = buffer;",
				"\t\t\tplay();",
				"\t\t};",
				"\t\t",
				"\t\tvar error = function(e) {",
				"\t\t\tconsole.error( 'decodeAudioData:', e );",
				"\t\t};",
				"",
				"\t\tctx.decodeAudioData( this.binary, success, error );",
				"\t}",
				"\t",
				"\treturn this;",
				"",
				"};",
				"",
				"Clip.prototype._ready = false;",
				"",
				"Clip.prototype.ready = function( func ) {",
				"\tif ( this._ready ) {",
				"\t\tfunc();",
				"\t\treturn this;",
				"\t}",
				"\tthis._callbacks.push( func );",
				"\treturn this;",
				"};",
				"",
				"Clip.load = function( url, callback ) {",
				"",
				"\tvar r = new XMLHttpRequest();",
				"\tr.open( 'GET', url, true );",
				"\tr.responseType = 'arraybuffer';",
				"\t",
				"\tr.onload = function() {",
				"\t\tcallback( r.response );",
				"\t};",
				"",
				"\tr.send();",
				"",
				"\treturn r;",
				"",
				"};",
				"",
				"resources.set( 'Clip', Clip );"
			]
		],
		[
			"AudioManager",
			[
				"var root = this;",
				"var AudioContext = window.AudioContext || window.webkitAudioContext;",
				"var has = !!AudioContext;",
				"var ctx, analyser;",
				"",
				"var Clip = resources.get( 'Clip' );",
				"",
				"var intensities = {",
				"\tlow: 'low',",
				"\tmedium: 'medium',",
				"\thigh: 'high',",
				"\ttranscendent: 'transcendent'",
				"};",
				"",
				"var sections = [",
				"\t'beat-up-all-my-cues-for-you',",
				"\t'some-other-way-to-get-to-you',",
				"\t'do-anything-but-upset-you',",
				"\t'what-you-dont-know',",
				"\t'bridge'",
				"];",
				"",
				"sections.ids = {",
				"\t'beat-up-all-my-cues-for-you': 0,",
				"\t'some-other-way-to-get-to-you': 1,",
				"\t'do-anything-but-upset-you': 2,",
				"\t'what-you-dont-know': 3,",
				"\t'bridge': 4",
				"};",
				"",
				"var files = {",
				"\tlow: [ 0, 1, 3, 4 ],",
				"\tmedium: [ 0, 1, 3, 4 ],",
				"\thigh: [ 0, 2, 3, 4 ],",
				"\ttranscendent: [ 2, 4 ]",
				"};",
				"",
				"var complete = function() {",
				"\tcomplete.index++;",
				"\tif ( !complete.isComplete && complete.index >= complete.total ) {",
				"\t\tAudioManager._ready = true;",
				"\t\tfor ( var i = 0; i < AudioManager._callbacks.length; i++ ) {",
				"\t\t\tAudioManager._callbacks[ i ].call( AudioManager );",
				"\t\t}",
				"\t\tAudioManager._callbacks.length = 0;",
				"\t\tcomplete.isComplete = true;",
				"\t}",
				"};",
				"complete.index = 0;",
				"complete.total = 0;",
				"complete.isComplete = false;",
				"",
				"var formats = {",
				"\tOSX: 'aac',",
				"\tstandard: 'ogg'",
				"};",
				"",
				"var AudioManager = {",
				"",
				"\tfiles: files,",
				"\tintensities: intensities,",
				"\tsections: sections,",
				"\t",
				"\tctx: null,",
				"\tcurrent: {",
				"\t\tintensity: intensities.low,",
				"\t\tsection: sections[ 0 ],",
				"\t\tbar: 0\t// An extrapolation of elapsed time",
				"\t},",
				"\tstartTime: null,",
				"",
				"\t// Song specific parameters",
				"\tbpm: 90,",
				"\tbars: 4,",
				"\tbeats: 4,",
				"",
				"\t_ready: false,",
				"\t_callbacks: [],",
				"",
				"\tready: function( func ) {",
				"\t\tif ( AudioManager._ready ) {",
				"\t\t\tfunc.call( AudioManager );",
				"\t\t\treturn AudioManager;",
				"\t\t}",
				"\t\tAudioManager._callbacks.push( func );",
				"\t\treturn AudioManager;",
				"\t},",
				"",
				"\tstart: function() {",
				"",
				"\t\tvar bps = AudioManager.bpm / 60;",
				"\t\tvar current = AudioManager.current;",
				"",
				"\t\tif ( !ctx ) {",
				"\t\t\tctx = AudioManager.ctx = new AudioContext();",
				"\t\t}",
				"\t\tAudioManager.reset();",
				"\t\tAudioManager.startTime += 1 / bps;\t// Hold a beat offset to keep things in time",
				"",
				"\t\tvar clip = AudioManager.getClip( current.intensity, current.section );",
				"\t\tif ( clip.source ) {",
				"\t\t\tclip.source.stop( ctx.currentTime );",
				"\t\t}",
				"\t\tclip.play( ctx, AudioManager.startTime );",
				"",
				"\t},",
				"",
				"\tupdate: function() {",
				"",
				"\t\tif ( !AudioManager.player || !AudioManager.player.isPlaying ) {",
				"\t\t\treturn;",
				"\t\t}",
				"",
				"\t\tif ( !ctx || AudioManager.startTime === null ) {",
				"\t\t\tAudioManager.start();",
				"\t\t\treturn;",
				"\t\t}",
				"\t\t",
				"\t\tvar time = ctx.currentTime;",
				"\t\tvar elapsed = time - AudioManager.startTime;",
				"\t\tvar bps = AudioManager.bpm / 60;",
				"\t\tvar spb = 1 / bps;",
				"\t\tvar beat = Math.floor( ( elapsed * bps ) );",
				"\t\tvar bar = Math.floor( beat / AudioManager.beats );",
				"\t\tvar current = AudioManager.current;",
				"\t\t",
				"\t\tif ( bar - current.bar >= AudioManager.bars - 1 ) {",
				"",
				"\t\t\tcurrent.bar += AudioManager.bars * Math.ceil( ( bar - current.bar ) / AudioManager.bars );",
				"",
				"\t\t\tvar clip = AudioManager.getClip( current.intensity, current.section );",
				"\t\t\tvar future = current.bar * AudioManager.beats / bps + AudioManager.startTime;",
				"",
				"\t\t\tif ( future > ctx.currentTime ) {",
				"\t\t\t\tclip.play( ctx, future );",
				"\t\t\t}",
				"",
				"\t\t}",
				"",
				"\t},",
				"",
				"\treset: function() {",
				"\t\tAudioManager.startTime = ctx.currentTime;",
				"\t\tAudioManager.current.bar = 0;",
				"\t\treturn this;",
				"\t},",
				"",
				"\t// Getters / Setters",
				"",
				"\tgetClip: function( intensity, section ) {",
				"\t\treturn files[ intensity ][ section ];",
				"\t},",
				"\tsetPlayer: function( player ) {",
				"\t\tAudioManager.player = player;",
				"\t},",
				"\tsetIntensity: function( intensity ) {",
				"\t\tAudioManager.current.intensity = intensity;",
				"\t},",
				"\tsetSection: function( section ) {",
				"\t\tAudioManager.current.section = section;",
				"\t},",
				"\tbarsToSeconds: function( bars ) {",
				"\t\treturn ( AudioManager.beats * bars ) / ( AudioManager.bpm / 60 );",
				"\t},",
				"",
				"\t/**",
				"\t * Returns the time in seconds of when the next",
				"\t * clip will play. Intended for use with visual",
				"\t * syncing through `setTimeout`s.",
				"\t */",
				"\tTTL: function() {",
				"",
				"\t\tvar now = ctx.currentTime;",
				"\t\tvar seconds = AudioManager.barsToSeconds( AudioManager.current.bar );",
				"\t\tseconds += AudioManager.startTime;",
				"",
				"\t\tif ( seconds > now ) {",
				"\t\t\treturn seconds - now;",
				"\t\t} else {",
				"\t\t\tseconds = AudioManager.barsToSeconds( AudioManager.current.bar + AudioManager.bars );",
				"\t\t\tseconds += AudioManager.startTime;",
				"\t\t\treturn seconds - now;",
				"\t\t}",
				"\t}",
				"",
				"};",
				"",
				"setup();",
				"",
				"function setup() {",
				"",
				"\tfor ( var f in files ) {",
				"",
				"\t\tvar intensity = files[ f ];",
				"",
				"\t\tfor ( var i = 0; i < intensity.length; i++ ) {",
				"",
				"\t\t\tvar sid = intensity[ i ];",
				"\t\t\tvar section = sections[ sid ];",
				"\t\t\tvar url = [",
				"\t\t\t\t'../assets/loops/',",
				"\t\t\t\tf.toUpperCase(),",
				"\t\t\t\t'-',",
				"\t\t\t\tsection,",
				"\t\t\t\t'.',",
				"\t\t\t\tformats.standard // TODO: Check for OSX",
				"\t\t\t].join( '' );",
				"",
				"\t\t\tvar clip = new Clip( url )",
				"\t\t\t\t.ready( complete );",
				"",
				"\t\t\tclip.section = section;",
				"\t\t\tclip.intensity = f;",
				"",
				"\t\t\tcomplete.total++;",
				"\t\t\tintensity[ section ] = clip;",
				"",
				"\t\t}",
				"",
				"\t}",
				"",
				"}",
				"",
				"resources.set( 'AudioManager', AudioManager );"
			]
		]
	],
	"effects": [
		[
			"Manage Audio",
			[
				"var manager = resources.get( 'AudioManager' );",
				"",
				"manager.ready( function() {",
				"\tif ( !player.isPlaying ) {",
				"\t\tplayer.play();",
				"\t}",
				"} );",
				"",
				"function start() {",
				"\tmanager.setPlayer( player );",
				"}",
				"",
				"function end() {",
				"\tplayer.currentTime = 0;",
				"}",
				"",
				"function update( progress ) {",
				"\tmanager.update();",
				"}"
			]
		],
		[
			"Single Button",
			[
				"var two = resources.get( 'two' );",
				"var group = two.makeGroup();",
				"",
				"var nextTime = 0;",
				"var button = new Two.RoundedRectangle(0, 0, 200, 50, 8);",
				"",
				"group.add( button );",
				"group.visible = false;",
				"",
				"two.update();",
				"button._renderer.elem.addEventListener( 'click', function() {",
				"\tnextTime = 20;",
				"}, false );",
				"",
				"function start() {",
				"",
				"\tgroup.visible = true;",
				"\tbutton.translation.set( two.width / 2, two.height / 2 );",
				"",
				"}",
				"",
				"function end() {",
				"",
				"\tif ( nextTime !== 0 ) {",
				"\t\tgroup.visible = false;",
				"\t}",
				"\tplayer.currentTime = nextTime;",
				"",
				"}",
				"",
				"function update( progress ) {",
				"",
				"}"
			]
		],
		[
			"Update Two.js",
			[
				"var two = resources.get( 'two' );",
				"",
				"function start() {",
				"\ttwo.playing = true;",
				"}",
				"",
				"function end() {",
				"\ttwo.playing = false;",
				"}",
				"",
				"function update( progress ) {",
				"",
				"\ttwo.update();",
				"",
				"}"
			]
		],
		[
			"Single Button Medium",
			[
				"var manager = resources.get( 'AudioManager' );",
				"var two = resources.get( 'two' );",
				"var group = new Two.Group();",
				"var button = createButton( 'Medium' );",
				"",
				"button.color = 'rgb( 225, 100, 125 )';",
				"",
				"var nextAnimation = 0;",
				"",
				"group.add( button );",
				"two.add( group );",
				"",
				"group.visible = false;",
				"two.renderer.domElement.addEventListener( 'click', click, false );",
				"",
				"function start() {",
				"",
				"\tnextAnimation = 0;",
				"\tgroup.visible = true;",
				"\ttwo.scene.translation.set( two.width / 2, two.height / 2 );",
				"",
				"}",
				"",
				"function end() {",
				"",
				"\tif ( nextAnimation !== 0 ) {",
				"\t\tgroup.visible = false;",
				"\t}",
				"\tplayer.currentTime = nextAnimation;",
				"",
				"}",
				"",
				"function update( progress ) {",
				"\tbutton.opacity += ( 0.5 - button.opacity ) * 0.125;",
				"}",
				"",
				"function click(e) {",
				"",
				"\tif ( !group.visible ) {",
				"\t\treturn;",
				"\t}",
				"",
				"\tvar x = e.clientX;",
				"\tvar y = e.clientY;",
				"",
				"\tif ( button.hit( x, y ) ) {",
				"\t\tnextAnimation = 11;",
				"\t\tbutton.opacity = 1;",
				"\t\tmanager.setIntensity( manager.intensities.medium );",
				"\t}",
				"",
				"}",
				"",
				"function createButton( message, width, height ) {",
				"",
				"\tvar styles = {",
				"\t\tfamily: 'Helvetica, Arial, sans-serif',",
				"\t\tsize: ( height || 50 ) * 0.5,",
				"\t\tleading: ( height || 50 ) * 0.5,",
				"\t\tfill: '#333',",
				"\t\tstroke: 'transparent'",
				"\t};",
				"\tvar path = new Two.RoundedRectangle(0, 0, width || 200, height || 50, 4);",
				"\tvar text = new Two.Text( message, 0, 0, styles );",
				"\tvar group = new Two.Group();",
				"",
				"\tpath.linewidth = 2;",
				"\tpath.stroke = '#333';",
				"",
				"\tgroup.add( path, text );",
				"\t",
				"\tgroup.hit = function( x, y ) {",
				"\t\tvar rect = path.getBoundingClientRect();",
				"\t\treturn x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;",
				"\t};",
				"\t",
				"\tgroup.rect = path;",
				"\tgroup.text = text;",
				"\t",
				"\tObject.defineProperty( group, 'color', {",
				"",
				"\t\tenumerable: true,",
				"",
				"\t\tget: function() {",
				"\t\t\treturn path.fill;",
				"\t\t},",
				"",
				"\t\tset: function(v) {",
				"\t\t\tpath.fill = v;",
				"\t\t}",
				"",
				"\t});",
				"",
				"\treturn group;",
				"",
				"}"
			]
		],
		[
			"Manage Two.js",
			[
				"var two = resources.get( 'two' );",
				"",
				"function start() {",
				"\ttwo.playing = true;",
				"}",
				"",
				"function end() {",
				"\ttwo.playing = false;",
				"}",
				"",
				"function update( progress ) {",
				"\ttwo.update();",
				"}"
			]
		],
		[
			"Single Button Low",
			[
				"var manager = resources.get( 'AudioManager' );",
				"var two = resources.get( 'two' );",
				"var group = new Two.Group();",
				"var button = createButton( 'Low' );",
				"",
				"button.color = 'rgb( 125, 100, 225 )';",
				"",
				"var nextAnimation = 11;",
				"",
				"group.add( button );",
				"two.add( group );",
				"",
				"group.visible = false;",
				"two.renderer.domElement.addEventListener( 'click', click, false );",
				"",
				"function start() {",
				"",
				"\tnextAnimation = 11;",
				"\tgroup.visible = true;",
				"\ttwo.scene.translation.set( two.width / 2, two.height / 2 );",
				"",
				"}",
				"",
				"function end() {",
				"",
				"\tif ( nextAnimation !== 11 ) {",
				"\t\tgroup.visible = false;",
				"\t}",
				"\tplayer.currentTime = nextAnimation;",
				"",
				"}",
				"",
				"function update( progress ) {",
				"\tbutton.opacity += ( 0.5 - button.opacity ) * 0.125;",
				"}",
				"",
				"function click(e) {",
				"",
				"\tif ( !group.visible ) {",
				"\t\treturn;",
				"\t}",
				"",
				"\tvar x = e.clientX;",
				"\tvar y = e.clientY;",
				"",
				"\tif ( button.hit( x, y ) ) {",
				"\t\tnextAnimation = 0;",
				"\t\tbutton.opacity = 1;",
				"\t\tmanager.setIntensity( manager.intensities.low );",
				"\t}",
				"",
				"}",
				"",
				"function createButton( message, width, height ) {",
				"",
				"\tvar styles = {",
				"\t\tfamily: 'Helvetica, Arial, sans-serif',",
				"\t\tsize: ( height || 50 ) * 0.5,",
				"\t\tleading: ( height || 50 ) * 0.5,",
				"\t\tfill: '#333',",
				"\t\tstroke: 'transparent'",
				"\t};",
				"\tvar path = new Two.RoundedRectangle(0, 0, width || 200, height || 50, 4);",
				"\tvar text = new Two.Text( message, 0, 0, styles );",
				"\tvar group = new Two.Group();",
				"",
				"\tpath.linewidth = 2;",
				"\tpath.stroke = '#333';",
				"",
				"\tgroup.add( path, text );",
				"\t",
				"\tgroup.hit = function( x, y ) {",
				"\t\tvar rect = path.getBoundingClientRect();",
				"\t\treturn x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;",
				"\t};",
				"\t",
				"\tgroup.rect = path;",
				"\tgroup.text = text;",
				"\t",
				"\tObject.defineProperty( group, 'color', {",
				"",
				"\t\tenumerable: true,",
				"",
				"\t\tget: function() {",
				"\t\t\treturn path.fill;",
				"\t\t},",
				"",
				"\t\tset: function(v) {",
				"\t\t\tpath.fill = v;",
				"\t\t}",
				"",
				"\t});",
				"",
				"\treturn group;",
				"",
				"}"
			]
		],
		[
			"Soundboard",
			[
				"var domElement = resources.get( 'dom' );",
				"var manager = resources.get( 'AudioManager' );",
				"var buttons = [];",
				"",
				"// Reset the DOM on start, mainly for",
				"// the editor's development environment.",
				"domElement.innerHTML = '';",
				"",
				"/**",
				" * Initialize the effect with all the",
				" * loaded audio Clips. For each clip",
				" * create a button that visualizes",
				" * its use.",
				" */",
				"manager.ready( function() {",
				"",
				"\tvar i = 0;",
				"\tfor ( var f in manager.files ) {",
				"\t\tvar intensity = manager.files[ f ];",
				"\t\tfor ( var j = 0; j < intensity.length; j++ ) {",
				"\t\t\tvar sid = intensity[ j ];",
				"\t\t\tvar section = manager.sections[ sid ];",
				"\t\t\tvar clip = intensity[ section ];",
				"\t\t\tvar button = createButton( i, clip );",
				"\t\t\tbuttons.push( button );",
				"\t\t\ti++;",
				"\t\t}",
				"\t}",
				"",
				"} );",
				"",
				"function start() {}",
				"",
				"function end() {}",
				"",
				"function update( progress ) {",
				"\tif ( !manager.ctx ) {",
				"\t\treturn;",
				"\t}",
				"\tvar elapsed = manager.ctx.currentTime;",
				"\tfor ( var i = 0; i < buttons.length; i++ ) {",
				"\t\tbuttons[ i ].update( elapsed );",
				"\t}",
				"}",
				"",
				"function createButton( index, clip ) {",
				"\t",
				"\tvar button = document.createElement( 'button' );",
				"\tvar text = clip.url.match( /\\/([a-zA-Z0-9\\-]*)\\./ )[ 1 ];",
				"",
				"\tvar div = document.createElement( 'div' );",
				"\tvar cursor = document.createElement( 'div' );",
				"\tvar p = document.createElement( 'p' );",
				"",
				"\tbutton.setAttribute( 'index', index );",
				"\t",
				"\tbutton.style.padding = 0;",
				"\tbutton.style.margin = 5 + 'px';",
				"\tbutton.style.border = 5 + 'px solid transparent';",
				"\tbutton.style.borderRadius = 2.5 + 'px';",
				"",
				"\tdiv.style.position = 'relative';",
				"\tdiv.style.padding = 5 + 'px ' + 8 + 'px';",
				"",
				"\tcursor.style.position = 'absolute';",
				"\tcursor.style.top = 0;",
				"\tcursor.style.left = 0;",
				"\tcursor.style.bottom = 0;",
				"\tcursor.style.width = 0 + '%';",
				"\tcursor.style.background = 'rgba( 0, 0, 0, 0.5 )';",
				"",
				"\tp.textContent = text;",
				"\tp.style.position = 'relative';",
				"\tp.style.color = 'white';",
				"\tp.style.margin = 0;",
				"",
				"\tdiv.appendChild( cursor );",
				"\tdiv.appendChild( p );",
				"\tbutton.appendChild( div );",
				"\tdomElement.appendChild( button );",
				"\t",
				"\tbutton.addEventListener( 'click', cue, false );",
				"",
				"\treturn {",
				"\t\tclip: clip,",
				"\t\tdomElement: button,",
				"\t\tactive: false,",
				"\t\tupdate: function( elapsed ) {",
				"\t\t\tif ( clip.playing ) {",
				"\t\t\t\tvar delta = elapsed - clip.startTime;",
				"\t\t\t\tvar duration = ( manager.beats * manager.bars ) / ( manager.bpm / 60 );",
				"\t\t\t\tvar pct = Math.max( delta, 0 ) / duration;",
				"\t\t\t\tcursor.style.width = pct * 100 + '%';",
				"\t\t\t} else if ( cursor.style.width !== 0 ) {",
				"\t\t\t\tcursor.style.width = 0;",
				"\t\t\t}",
				"\t\t}",
				"\t};",
				"}",
				"",
				"function cue( event ) {",
				"",
				"\tvar current = buttons[ parseInt( this.getAttribute( 'index' ) ) ];",
				"",
				"\tvar elems = domElement.querySelectorAll( '.active' );",
				"\tfor ( var i = 0; i < elems.length; i++ ) {",
				"",
				"\t\tvar elem = elems[ i ];",
				"\t\tvar index = elem.getAttribute( 'index' );",
				"\t\tvar button = buttons[ index ];",
				"",
				"\t\telem.classList.remove( 'active' );",
				"\t\tbutton.active = false;",
				"",
				"\t}",
				"\t",
				"\tcurrent.domElement.classList.add( 'active' );",
				"\tcurrent.active = true;",
				"\tmanager.setIntensity( current.clip.intensity );",
				"\tmanager.setSection( current.clip.section );",
				"",
				"}"
			]
		],
		[
			"Manage Audio",
			[
				"var manager = resources.get( 'AudioManager' );",
				"manager.ready( function() {",
				"\tif ( !player.isPlaying ) {",
				"\t\tplayer.play();",
				"\t}",
				"} );",
				"",
				"function start() {",
				"",
				"\tmanager.setPlayer( player );",
				"",
				"}",
				"",
				"function end() {",
				"",
				"\tplayer.currentTime = 0;",
				"",
				"}",
				"",
				"function update( progress ) {",
				"",
				"\tmanager.update();",
				"",
				"}"
			]
		],
		[
			"Soundboard",
			[
				"var domElement = resources.get( 'dom' );",
				"var manager = resources.get( 'AudioManager' );",
				"",
				"domElement.innerHTML = '';",
				"",
				"var buttons = [];",
				"",
				"manager.ready( function() {",
				"",
				"\tvar i = 0;",
				"\tfor ( var f in manager.files ) {",
				"\t\tvar intensity = manager.files[ f ];",
				"\t\tfor ( var j = 0; j < intensity.length; j++ ) {",
				"\t\t\tvar sid = intensity[ j ];",
				"\t\t\tvar section = manager.sections[ sid ];",
				"\t\t\tvar clip = intensity[ section ];",
				"\t\t\tvar button = createButton( i, clip );",
				"\t\t\tbuttons.push( button );",
				"\t\t\ti++;",
				"\t\t}",
				"\t}",
				"",
				"} );",
				"",
				"function start(){}",
				"",
				"function end(){}",
				"",
				"function update( progress ) {",
				"",
				"\tif ( !manager.ctx ) {",
				"\t\treturn;",
				"\t}",
				"",
				"\tvar elapsed = manager.ctx.currentTime;",
				"\tfor ( var i = 0; i < buttons.length; i++ ) {",
				"\t\tbuttons[ i ].update( elapsed );",
				"\t}",
				"",
				"}",
				"",
				"function createButton( index, clip ) {",
				"",
				"\tvar text = clip.url.match( /\\/([a-zA-Z0-9\\-]*)\\./i )[ 1 ];",
				"",
				"\tvar button = document.createElement( 'button' );",
				"\tvar div = document.createElement( 'div' );",
				"\tvar cursor = document.createElement( 'div' );",
				"\tvar p = document.createElement( 'p' );",
				"",
				"\tbutton.setAttribute( 'index', index );",
				"\tbutton.style.padding = 0;",
				"\tbutton.style.margin = 5 + 'px';",
				"\tbutton.style.border = 5 + 'px solid transparent';",
				"\tbutton.style.borderRadius = 2.5 + 'px';",
				"\t",
				"\tdiv.style.position = 'relative';",
				"\tdiv.style.padding = 5 + 'px ' + 8 + 'px';",
				"\t",
				"\tcursor.style.position = 'absolute';",
				"\tcursor.style.top = 0;",
				"\tcursor.style.left = 0;",
				"\tcursor.style.bottom = 0;",
				"\tcursor.style.width = 0 + '%';",
				"\tcursor.style.background = 'rgba( 0, 0, 0, 0.5 )';",
				"",
				"\tp.textContent = text;",
				"\tp.style.position = 'relative';",
				"\tp.style.padding = 0;",
				"\tp.style.margin = 0;",
				"\tp.style.color = 'white';",
				"",
				"\tdiv.appendChild( cursor );",
				"\tdiv.appendChild( p );",
				"\tbutton.appendChild( div );",
				"\tdomElement.appendChild( button );",
				"",
				"\tbutton.addEventListener( 'click', cue, false );",
				"",
				"\tvar result = {",
				"\t\tdomElement: button,",
				"\t\tclip: clip,",
				"\t\tactive: false,",
				"\t\tupdate: function( elapsed ) {",
				"",
				"\t\t\tvar delta, duration, pct;",
				"",
				"\t\t\tif ( clip.playing ) {",
				"\t\t\t\tdelta = elapsed - clip.startTime;",
				"\t\t\t\tduration = manager.barsToSeconds( 4 );",
				"\t\t\t\tpct = Math.max( delta, 0 ) / duration;",
				"\t\t\t\tcursor.style.width = pct * 100 + '%';",
				"\t\t\t} else if ( cursor.style.width !== 0 ) {",
				"\t\t\t\tcursor.style.width = 0;",
				"\t\t\t}",
				"",
				"\t\t\tif ( result.active ) {",
				"\t\t\t\tdelta = manager.TTL();",
				"\t\t\t\tduration = manager.barsToSeconds( 4 );",
				"\t\t\t\tpct = Math.max( delta, 0 ) / duration;",
				"\t\t\t\tbutton.style.borderColor = clerp( pct );",
				"\t\t\t} else if ( button.style.borderColor !== 'transparent' ) {",
				"\t\t\t\tbutton.style.borderColor = 'transparent';",
				"\t\t\t}",
				"",
				"\t\t}",
				"\t};",
				"\t",
				"\treturn result;",
				"}",
				"",
				"function cue( event ) {",
				"",
				"\tvar index = parseInt( this.getAttribute( 'index' ) );",
				"",
				"\tfor ( var i = 0; i < buttons.length; i++ ) {",
				"\t\tvar button = buttons[ i ];",
				"\t\tif ( i === index ) {",
				"\t\t\t// Activate clip",
				"\t\t\tbutton.active = true;",
				"\t\t\tmanager.setIntensity( button.clip.intensity );",
				"\t\t\tmanager.setSection( button.clip.section );",
				"\t\t} else {",
				"\t\t\t// Deactivate clip",
				"\t\t\tbutton.active = false;",
				"\t\t}",
				"\t}",
				"",
				"}",
				"",
				"function clerp( t ) {",
				"\treturn 'rgba( 255, 50, 50, ' + t + ')';",
				"}"
			]
		]
	],
	"animations": [
		[
			"Audio",
			0,
			20,
			0,
			7,
			true
		],
		[
			"DOM",
			0,
			20,
			1,
			8,
			true
		]
	]
}
