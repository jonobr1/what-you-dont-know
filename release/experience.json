{
	"config": {},
	"libraries": [
		"../release/third-party/WebAudio.js",
		"../release/third-party/three.js",
		"../release/third-party/two.js",
		"../release/third-party/WebVR.js",
		"../release/third-party/tween.js",
		"../release/third-party/OrbitControls.js",
		"../release/src/interaction.js"
	],
	"includes": [
		[
			"AudioManager",
			[
				"var tracks = {",
				"\t'vocals': [],",
				"\t'vocals-a': [],",
				"\t'vocals-b': [],",
				"\t'vocals-c': [],",
				"\t'vocals-d': [],",
				"\t'vocals-e': [],",
				"\t'machine-drum-a': [],",
				"\t'machine-drum-b': [],",
				"\t'instrumental': [], ",
				"\t'melody': [],",
				"\t'blips': [],",
				"\t'sub-tone': [],",
				"\t'sfx': [],",
				"\t'summation': []",
				"};",
				"",
				"// Simple flat array of every WebAudio object",
				"// for quick and easy access.",
				"var sources = [];",
				"var schedule = [];",
				"",
				"schedule.limit = 8;",
				"schedule.index = 0;",
				"schedule.reset = function() {",
				"\tif ( schedule.length !== 0 ) {",
				"\t\tschedule.length = 0;",
				"\t\tschedule.index = 0;",
				"\t}",
				"\treturn schedule;",
				"};",
				"",
				"// Lower is higher seeded",
				"var ranking = {",
				"\t'melody': 0,",
				"\t'machine-drum': 1,",
				"\t'sfx': 2,",
				"\t'summation': 2,",
				"\t'vocals': 3,",
				"\t'instrumental': 3,",
				"\t'blips': 4,",
				"\t'sub-tone': 5,",
				"\t'summation': 5,",
				"\tcomparator: function( a, b ) {",
				"\t\treturn ranking[ a.name ] - ranking[ b.name ];",
				"\t}",
				"};",
				"",
				"/**",
				" * An array describing what audio clips exist for",
				" * each track at every section of the \"song\".",
				" * `true` means there is a clip available and its",
				" * filename corresponds to its position within the object.",
				" * Finally, a `String` represents a corresponding",
				" * clip from a different section of the song. This is",
				" * used to select the specific clip.",
				" *",
				" * When there is a letter, e.g: 'A' or 'B', in the",
				" * id it means that track actually extends and has",
				" * a relationship with the other matching ids. This",
				" * is mainly used for vocals that are two sets of bars.",
				" */",
				"var sequence = [",
				"",
				"\t{",
				"\t\tid: '1.01',",
				"\t\tname: 'intro',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'melody': true,",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.02A',",
				"\t\tname: 'intro',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.02B',",
				"\t\tname: 'intro',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"",
				"\t//",
				"",
				"\t{",
				"\t\tid: '1.03',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-a': true,",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'summation': 'intro'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.04',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-b': true,",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'summation': 'intro'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.05',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-c': true,",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'summation': 'intro'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.06',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-d': true,",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'summation': 'intro'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.07',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-e': true,",
				"\t\t\t'machine-drum-a': 'intro',",
				"\t\t\t'melody': 'intro',",
				"\t\t\t'summation': 'intro'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '1.08',",
				"\t\tname: 'verse-1',",
				"\t\ttracks: {",
				"\t\t\t'vocals-e': 'verse-1',",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'melody': true,",
				"\t\t\t'sub-tone': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"\t//",
				"",
				"\t{",
				"\t\tid: '2.01',",
				"\t\tname: 'verse-2',",
				"\t\ttracks: {",
				"\t\t\t'vocals-a': true,",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'melody': true,",
				"\t\t\t'sub-tone': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '2.02',",
				"\t\tname: 'verse-2',",
				"\t\ttracks: {",
				"\t\t\t'vocals-b': true,",
				"\t\t\t'machine-drum-a': 'verse-2',",
				"\t\t\t'instrumental': 'verse-2',",
				"\t\t\t'melody': 'verse-2',",
				"\t\t\t'sub-tone': 'verse-2',",
				"\t\t\t'summation': 'verse-2'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '2.03',",
				"\t\tname: 'verse-2',",
				"\t\ttracks: {",
				"\t\t\t'vocals-c': true,",
				"\t\t\t'machine-drum-a': 'verse-2',",
				"\t\t\t'instrumental': 'verse-2',",
				"\t\t\t'melody': 'verse-2',",
				"\t\t\t'sub-tone': 'verse-2',",
				"\t\t\t'summation': 'verse-2'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '2.04A',",
				"\t\tname: 'verse-2',",
				"\t\ttracks: {",
				"\t\t\t'vocals-d': true,",
				"\t\t\t'machine-drum-a': 'verse-2',",
				"\t\t\t'instrumental': 'verse-2',",
				"\t\t\t'melody': 'verse-2',",
				"\t\t\t'sub-tone': 'verse-2',",
				"\t\t\t'summation': 'verse-2'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '2.04B',",
				"\t\tname: 'verse-2',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': 'verse-2',",
				"\t\t\t'instrumental': 'verse-2',",
				"\t\t\t'melody': 'verse-2',",
				"\t\t\t'sub-tone': 'verse-2',",
				"\t\t\t'summation': 'verse-2'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t",
				"\t//",
				"\t",
				"\t{",
				"\t\tid: '3.01',",
				"\t\tname: 'chorus',",
				"\t\ttracks: {",
				"\t\t\t'vocals-a': true,",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'melody': true,",
				"\t\t\t'blips': true,",
				"\t\t\t'sub-tone': true,",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '3.02',",
				"\t\tname: 'chorus',",
				"\t\ttracks: {",
				"\t\t\t'vocals-b': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'chorus',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'chorus',",
				"\t\t\t'summation': 'chorus'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '3.03',",
				"\t\tname: 'chorus',",
				"\t\ttracks: {",
				"\t\t\t'vocals-c': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'chorus',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'chorus',",
				"\t\t\t'summation': 'chorus'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '3.04',",
				"\t\tname: 'chorus',",
				"\t\ttracks: {",
				"\t\t\t'vocals-d': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'chorus',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'chorus',",
				"\t\t\t'summation': 'chorus'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '3.05',",
				"\t\tname: 'chorus',",
				"\t\ttracks: {",
				"\t\t\t'vocals-e': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'chorus',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'chorus',",
				"\t\t\t'summation': 'chorus'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"\t//",
				"",
				"\t{",
				"\t\tid: '4.01',",
				"\t\tname: 'verse-3',",
				"\t\ttracks: {",
				"\t\t\t'vocals-a': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': true,",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '4.02',",
				"\t\tname: 'verse-3',",
				"\t\ttracks: {",
				"\t\t\t'vocals-b': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-3',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-3',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '4.03',",
				"\t\tname: 'verse-3',",
				"\t\ttracks: {",
				"\t\t\t'vocals-c': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-3',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-3',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '4.04',",
				"\t\tname: 'verse-3',",
				"\t\ttracks: {",
				"\t\t\t'vocals-d': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-3',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-3',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '4.05',",
				"\t\tname: 'verse-3',",
				"\t\ttracks: {",
				"\t\t\t'vocals-e': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-3',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-3',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"\t//",
				"",
				"\t{",
				"\t\tid: '5.01',",
				"\t\tname: 'verse-4',",
				"\t\ttracks: {",
				"\t\t\t'vocals-a': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': true,",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '5.02',",
				"\t\tname: 'verse-4',",
				"\t\ttracks: {",
				"\t\t\t'vocals-b': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-4',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '5.03',",
				"\t\tname: 'verse-4',",
				"\t\ttracks: {",
				"\t\t\t'vocals-c': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-4',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '5.04A',",
				"\t\tname: 'verse-4',",
				"\t\ttracks: {",
				"\t\t\t'vocals-d': true,",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-4',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '5.04B',",
				"\t\tname: 'verse-4',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': 'chorus',",
				"\t\t\t'instrumental': 'chorus',",
				"\t\t\t'melody': 'chorus',",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': 'chorus',",
				"\t\t\t'sfx': 'verse-4',",
				"\t\t\t'summation': 'verse-3'",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"\t//",
				"",
				"\t{",
				"\t\tid: '6.01A',",
				"\t\tname: 'breakdown',",
				"\t\ttracks: {",
				"\t\t\t'vocals': true,",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'melody': true,",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': true,",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '6.01B',",
				"\t\tname: 'breakdown',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'melody': true,",
				"\t\t\t'blips': 'verse-4',",
				"\t\t\t'sub-tone': true,",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"",
				"\t{",
				"\t\tid: '7.01A',",
				"\t\tname: 'outro',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'blips': true,",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t},",
				"\t{",
				"\t\tid: '7.01B',",
				"\t\tname: 'outro',",
				"\t\ttracks: {",
				"\t\t\t'machine-drum-a': true,",
				"\t\t\t'instrumental': true,",
				"\t\t\t'blips': true,",
				"\t\t\t'sfx': true,",
				"\t\t\t'summation': true",
				"\t\t},",
				"\t\tduration: 1",
				"\t}",
				"",
				"];",
				"",
				"var paused = true;",
				"var currentTime = 0;",
				"var playbackRate = 1;",
				"",
				"var manager = {",
				"",
				"\tunitDuration: 5.333, // In seconds",
				"\tstartTime: 0,",
				"",
				"\tsequence: sequence,",
				"",
				"\ttracks: {},",
				"",
				"\tanalysers: {",
				"\t\tlist: []",
				"\t},",
				"",
				"\tfilters: {",
				"\t\tlist: []",
				"\t},",
				"",
				"\tget currentTime() {",
				"\t\tvar ctx = WebAudio.getContext();",
				"\t\tvar playing = !paused;",
				"\t\tif ( playing ) {",
				"\t\t\treturn ( ctx.currentTime - manager.startTime ) * playbackRate;",
				"\t\t}",
				"\t\treturn currentTime;",
				"\t},",
				"\tset currentTime( time ) {",
				"\t\tvar playing = !paused;",
				"\t\tif ( playing ) {",
				"\t\t\tmanager.pause();",
				"\t\t}",
				"\t\tcurrentTime = time;",
				"\t\tif ( playing ) {",
				"\t\t\tmanager.play();",
				"\t\t}",
				"\t},",
				"",
				"\tget playbackRate() {",
				"\t\treturn playbackRate;",
				"\t},",
				"\tset playbackRate( rate ) {",
				"\t\tvar playing = !paused;",
				"\t\tif ( playing ) {",
				"\t\t\tmanager.pause();",
				"\t\t}",
				"\t\tplaybackRate = rate;",
				"\t\tif ( playing ) {",
				"\t\t\tmanager.play();",
				"\t\t}",
				"\t},",
				"\tget beats() {",
				"\t\tvar bars = 0;",
				"\t\tfor ( var i = 0; i < sequence.length; i++ ) {",
				"\t\t\tvar segment = sequence[ i ];",
				"\t\t\tbars += segment.duration;",
				"\t\t}",
				"\t\treturn bars * 4;",
				"\t},",
				"\tget duration() {",
				"\t\tvar duration = 0;",
				"\t\tfor ( var i = 0; i < sequence.length; i++ ) {",
				"\t\t\tvar segment = sequence[ i ];",
				"\t\t\tduration += segment.duration * manager.unitDuration;",
				"\t\t}",
				"\t\treturn duration;",
				"\t},",
				"",
				"\tpause: function() {",
				"\t\tfor ( var i = 0; i < sources.length; i++ ) {",
				"\t\t\tvar source = sources[ i ];",
				"\t\t\tsource.stop( 0 );",
				"\t\t}",
				"\t\tsources.length = 0;",
				"\t\tschedule.reset();",
				"\t\tif ( !paused ) {",
				"\t\t\tcurrentTime = manager.currentTime;",
				"\t\t}",
				"\t\tpaused = true;",
				"\t\treturn manager;",
				"\t},",
				"",
				"\tplay: function() {",
				"",
				"\t\tvar ctx = WebAudio.getContext();",
				"\t\tvar now = ctx.currentTime;",
				"\t\tvar startTime = 0;",
				"\t\tmanager.startTime = now - currentTime / playbackRate;",
				"",
				"\t\tfor ( var i = 0; i < sequence.length; i++ ) {",
				"",
				"\t\t\tvar segment = sequence[ i ];",
				"\t\t\tvar totalDuration = segment.duration * manager.unitDuration;",
				"",
				"\t\t\tif ( currentTime < startTime + totalDuration ) {",
				"",
				"\t\t\t\tfor ( var name in segment.tracks ) {",
				"",
				"\t\t\t\t\tvar st, et;",
				"\t\t\t\t\tvar sound = segment.tracks[ name ];",
				"\t\t\t\t\tvar buffer = sound.buffer;",
				"\t\t\t\t\tvar duration = sound.duration;",
				"\t\t\t\t\tvar offset = currentTime - startTime;",
				"",
				"\t\t\t\t\tif ( sound.track ) {",
				"",
				"\t\t\t\t\t\tvar source = ctx.createBufferSource();",
				"\t\t\t\t\t\tsource.buffer = buffer;",
				"\t\t\t\t\t\tsource.loop = sound.loop;",
				"\t\t\t\t\t\tsource.playbackRate.value = playbackRate;",
				"",
				"\t\t\t\t\t\tif ( currentTime < startTime ) {",
				"\t\t\t\t\t\t\tst = manager.startTime + startTime / playbackRate;",
				"\t\t\t\t\t\t\tet = st + totalDuration / playbackRate;",
				"\t\t\t\t\t\t\tif ( st < 0 ) {",
				"\t\t\t\t\t\t\t\tst = 0;",
				"\t\t\t\t\t\t\t}",
				"\t\t\t\t\t\t\tsource.startTime = st;",
				"\t\t\t\t\t\t\tsource.offsetTime = 0;",
				"\t\t\t\t\t\t\tsource.stopTime = et;",
				"\t\t\t\t\t\t} else {",
				"\t\t\t\t\t\t\tsource.startTime = now;",
				"\t\t\t\t\t\t\tsource.offsetTime = offset;",
				"\t\t\t\t\t\t\tsource.stopTime = now + totalDuration - offset;",
				"\t\t\t\t\t\t}",
				"",
				"\t\t\t\t\t\tsource.parent = sound.track.node;",
				"\t\t\t\t\t\tschedule.push( source );",
				"",
				"\t\t\t\t\t}",
				"\t\t\t\t}",
				"",
				"\t\t\t}",
				"\t\t\t",
				"\t\t\tstartTime += totalDuration;",
				"",
				"\t\t}",
				"",
				"\t\tpaused = false;",
				"",
				"\t\treturn manager;",
				"",
				"\t},",
				"",
				"\t/**",
				"\t * Call on `requestAnimationFrame` or equivalent",
				"\t * to incrementally schedule `AudioBufferSourceNode`s",
				"\t * to the audio context's graph.",
				"\t */",
				"\tupdate: function() {",
				"",
				"\t\tvar i = schedule.index;",
				"\t\tvar limit = schedule.limit;",
				"\t\tvar length = Math.min( i + limit, schedule.length );",
				"",
				"\t\twhile ( i < length ) {",
				"",
				"\t\t\tvar source = schedule[ i ];",
				"\t\t\tvar startTime = source.startTime;",
				"\t\t\tvar stopTime = source.stopTime;",
				"\t\t\tvar offsetTime = source.offsetTime;",
				"",
				"\t\t\tsource.start( startTime, offsetTime );",
				"\t\t\t// Due to Safari inconsistency we cannot schedule multiple stops",
				"\t\t\t// More info here: https://bugs.webkit.org/show_bug.cgi?id=180130",
				"\t\t\t// source.stop( stopTime );",
				"\t\t\tsource.connect( source.parent );",
				"\t\t\tsources.push( source );",
				"",
				"\t\t\ti++;",
				"",
				"\t\t}",
				"",
				"\t\tschedule.index = length;",
				"",
				"\t\tif ( schedule.index >= schedule.length ) {",
				"\t\t\tschedule.reset();",
				"\t\t}",
				"",
				"\t\treturn manager;",
				"",
				"\t},",
				"",
				"\tupdateFFT: function() {",
				"",
				"\t\tmanager.analyser.getByteTimeDomainData( manager.analyser.data );",
				"",
				"\t\tfor ( var i = 0; i < manager.analysers.list.length; i++ ) {",
				"\t\t\tvar analyser = manager.analysers.list[ i ];",
				"\t\t\tanalyser.getByteFrequencyData( analyser.data );",
				"\t\t}",
				"",
				"\t\treturn manager;",
				"",
				"\t},",
				"",
				"\taddTrack: function( name, clips ) {",
				"",
				"\t\tvar ctx = WebAudio.getContext();",
				"",
				"\t\tvar key = name.replace( /\\-[a-zA-Z]$/i, '' );",
				"\t\tvar analyser = manager.analysers[ key ];",
				"\t\tvar filter = manager.filters[ key ];",
				"",
				"\t\tif ( !( key in manager.analysers ) ) {",
				"\t\t\tanalyser = createAnalyser( ctx );",
				"\t\t\tanalyser.name = key;",
				"\t\t\tmanager.analysers[ key ] = analyser;",
				"\t\t\tmanager.analysers.list.push( analyser );",
				"\t\t}",
				"",
				"\t\tif ( !( key in manager.filters ) ) {",
				"\t\t\tfilter = createFilter( ctx );",
				"\t\t\tfilter.name = key;",
				"\t\t\tfilter.node = ctx.createGain();",
				"\t\t\tmanager.filters[ key ] = filter;",
				"\t\t\tmanager.filters.list.push( filter );",
				"\t\t\tfilter.connect( manager.destination );",
				"\t\t}",
				"",
				"\t\tvar track = {",
				"\t\t\tname: name,",
				"\t\t\tclips: clips,",
				"\t\t\tnode: filter.node",
				"\t\t};",
				"",
				"\t\tfor ( var i = 0; i < clips.length; i++ ) {",
				"\t\t\tvar clip = clips[ i ];",
				"\t\t\tif ( clip && !clip.connected ) {",
				"\t\t\t\tclip.track = track;",
				"\t\t\t\tclip.connect( track.node );",
				"\t\t\t\tclip.connected = true;",
				"\t\t\t}",
				"\t\t}",
				"",
				"\t\ttrack.node.connect( manager.filters[ key ] );",
				"\t\ttrack.node.connect( manager.analysers[ key ] );",
				"",
				"\t\tmanager.tracks[ name ] = track;",
				"",
				"\t\treturn track;",
				"",
				"\t}",
				"",
				"};",
				"",
				"var i, name, sound, url, property;",
				"var ua = navigator.userAgent;",
				"var isMP3 = ( !!ua.match( /Safari/ig ) && !ua.match( /Chrome/ig ) ) || !!ua.match( /Edge/ig );",
				"var ctx = WebAudio.getContext();",
				"var extension = isMP3 ? 'mp3' : 'ogg';",
				"",
				"for ( i = 0; i < sequence.length; i++ ) {",
				"",
				"\tvar segment = sequence[ i ];",
				"\t",
				"\tfor ( name in tracks ) {",
				"",
				"\t\tsound = null;",
				"\t\turl = '../assets/v2/' + segment.name + '-' + name + '.' + extension;",
				"",
				"\t\tif ( segment.tracks[ name ] ) {",
				"",
				"\t\t\tswitch ( typeof segment.tracks[ name ] ) {",
				"\t\t\t\tcase 'object':",
				"\t\t\t\t\tsound = new WebAudio();",
				"\t\t\t\t\tsound.onLoad = resources.queue();",
				"\t\t\t\t\tsound.src = url;",
				"\t\t\t\t\tfor ( property in segment.tracks[ name ] ) {",
				"\t\t\t\t\t\tsound[ property ] = segment.tracks[ name ][ property ];",
				"\t\t\t\t\t}",
				"\t\t\t\t\tsound.section = segment.name;",
				"\t\t\t\t\tbreak;",
				"\t\t\t\tcase 'string':",
				"\t\t\t\t\tsound = getSoundByTrackNameAndSection( name, segment.tracks[ name ] );",
				"\t\t\t\t\tbreak;",
				"\t\t\t\tcase 'boolean':",
				"\t\t\t\t\t// Create a new sound",
				"\t\t\t\t\tsound = new WebAudio();",
				"\t\t\t\t\tsound.onLoad = resources.queue();",
				"\t\t\t\t\tsound.src = url;",
				"\t\t\t\t\tsound.section = segment.name;",
				"\t\t\t\t\tbreak;",
				"\t\t\t}",
				"",
				"\t\t\t// Overwrite data saved to have",
				"\t\t\t// convenient access to the sound",
				"\t\t\tsegment.tracks[ name ] = sound;",
				"",
				"\t\t}",
				"",
				"\t\ttracks[ name ].push( sound );",
				"",
				"\t}",
				"",
				"}",
				"",
				"// Initialize Audio Manager",
				"",
				"var ctx = WebAudio.getContext();",
				"",
				"manager.master = ctx.createGain();",
				"manager.master.connect( ctx.destination );",
				"",
				"manager.destination = ctx.createGain();",
				"manager.destination.connect( manager.master );",
				"",
				"manager.analyser = createAnalyser( ctx );",
				"manager.destination.connect( manager.analyser );",
				"",
				"for ( name in tracks ) {",
				"\tmanager.addTrack( name, tracks[ name ] );",
				"}",
				"",
				"manager.analysers.list.sort( ranking.comparator );",
				"manager.filters.list.sort( ranking.comparator );",
				"",
				"//",
				"",
				"function getSoundByTrackNameAndSection( track, section ) {",
				"",
				"\tvar list = tracks[ track ];",
				"\tvar regex = new RegExp( section, 'i' );",
				"",
				"\tfor ( var i = 0; i < list.length; i++ ) {",
				"\t\tvar item = list[ i ];",
				"\t\tif ( item && regex.test( item.section ) ) {",
				"\t\t\treturn item;",
				"\t\t}",
				"\t}",
				"",
				"\treturn null;",
				"",
				"}",
				"",
				"function createAnalyser( ctx ) {",
				"",
				"\tvar analyser = ctx.createAnalyser();",
				"\tanalyser.fftSize = 32;",
				"\tanalyser.data = new Uint8Array( analyser.frequencyBinCount );",
				"",
				"\treturn analyser;",
				"}",
				"",
				"function createFilter( ctx ) {",
				"",
				"\tvar transform = 0;\t// [ 1, - 1 ] value",
				"    var node = ctx.createBiquadFilter( ctx );",
				"",
				"\tnode.type = 'highpass';",
				"\tnode.Q.value = 30;",
				"\tnode.detune.value = 0;",
				"\tnode.frequency.value = 0;",
				"",
				"\tnode.getTransform = function() {",
				"\t\treturn Math.round( transform * 100 ) / 100;",
				"\t}",
				"\tnode.setTransform = function( v ) {",
				"",
				"\t\ttransform = v;",
				"\t\tnode.type = v < 0 ? 'lowpass' : 'highpass';",
				"",
				"\t\tvar minValue = 40;",
				"\t\tvar maxValue = ctx.sampleRate / 2;",
				"\t\tvar numberOfOctaves = Math.log( maxValue / minValue ) / Math.LN2;",
				"\t\tvar exp = numberOfOctaves * ( Math.abs( v ) - 1.0 );",
				"\t\tvar offset = Math.pow( 2, numberOfOctaves * ( v - 1.0 ) );",
				"",
				"\t\tnode.frequency.value = offset * ( maxValue - minValue ) + minValue;",
				"",
				"\t\treturn node;",
				"",
				"\t};",
				"",
				"    return node;",
				"",
				"}",
				"",
				"resources.set( 'audio-manager', manager );"
			]
		],
		[
			"Scene",
			[
				"var scene = new THREE.Scene();",
				"",
				"resources.set( 'scene', scene );"
			]
		],
		[
			"Camera",
			[
				"var scene = resources.get( 'scene' );",
				"",
				"var camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, .01, 100000 );",
				"var group = new THREE.Group();",
				"group.position.set( 0, 0, 0 );",
				"",
				"group.rotation.y = - 0.5 * Math.PI;",
				"",
				"group.add( camera );",
				"scene.add( group );",
				"",
				"resources.set( 'camera', camera );"
			]
		],
		[
			"Renderer",
			[
				"var camera = resources.get( 'camera' );",
				"",
				"var renderer = new THREE.WebGLRenderer( {",
				"\tantialias: true,",
				"\tpreserveDrawingBuffer: true",
				"} );",
				"renderer.setClearColor( 0x000000, 1 );",
				"renderer.setPixelRatio( window.devicePixelRatio );",
				"",
				"var domElement = resources.get( 'dom' );",
				"domElement.appendChild( renderer.domElement );",
				"",
				"// renderer.vr.enabled = true;",
				"var WebVRButton = WEBVR.createButton( renderer );",
				"WebVRButton.style.zIndex = 'unset';",
				"domElement.appendChild( WebVRButton );",
				"",
				"resize();",
				"window.addEventListener( 'resize', resize, false );",
				"",
				"function resize() {",
				"",
				"\tvar rect = domElement.getBoundingClientRect();",
				"\tvar width = rect.width;",
				"\tvar height = rect.height;",
				"",
				"\tcamera.aspect = width / height;",
				"\tcamera.updateProjectionMatrix();",
				"",
				"\trenderer.setSize( width, height );",
				"",
				"}",
				"",
				"resources.set( 'renderer', renderer );"
			]
		],
		[
			"Backdrop",
			[
				"var scene = resources.get( 'scene' );",
				"",
				"var drag = 0.2;",
				"",
				"var backdrop = new THREE.Mesh(",
				"\tnew THREE.SphereBufferGeometry( 750, 750, 16, 16 ),",
				"\tnew THREE.ShaderMaterial( {",
				"",
				"\t\tuniforms: {",
				"\t\t\tcSource: { type: 'c', value: new THREE.Color( 0x000000 ) },",
				"\t\t\tcTarget: { type: 'c', value: new THREE.Color( 0x000000 ) },",
				"\t\t\tambient: { type: 'f', value: 1 }",
				"\t\t},",
				"",
				"\t\tvertexShader: [",
				"",
				"\t\t\t'varying vec2 vUv;',",
				"",
				"\t\t\t'void main() {',",
				"",
				"\t\t\t\t'vUv = uv;',",
				"\t\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',",
				"",
				"\t\t\t'}'",
				"",
				"\t\t].join( '\\n' ),",
				"",
				"\t\tfragmentShader: [",
				"",
				"\t\t\t'uniform vec3 cSource;',",
				"\t\t\t'uniform vec3 cTarget;',",
				"\t\t\t'uniform float ambient;',",
				"",
				"\t\t\t'varying vec2 vUv;',",
				"\t\t\t",
				"\t\t\t'void main() {',",
				"",
				"\t\t\t\t'vec3 pigment = mix( cSource, cTarget, vUv.y );',",
				"\t\t\t\t'gl_FragColor = vec4( ambient * pigment.rgb, 1.0 );',",
				"",
				"\t\t\t'}'",
				"",
				"\t\t].join( '\\n' ),",
				"\t\t",
				"\t\tside: THREE.BackSide,",
				"",
				"\t} )",
				");",
				"",
				"backdrop.userData.cSource = new THREE.Color( 0x000000 );",
				"backdrop.userData.cTarget = new THREE.Color( 0x000000 );",
				"",
				"backdrop.userData.setSourceColor = function ( color ) {",
				"\tbackdrop.userData.cSource.set( color );",
				"\treturn backdrop;",
				"};",
				"",
				"backdrop.userData.setTargetColor = function ( color ) {",
				"\tbackdrop.userData.cTarget.set( color );",
				"\treturn backdrop;",
				"};",
				"",
				"backdrop.userData.update = function ( progress, intensity ) {",
				"",
				"\tvar source = backdrop.userData.cSource;",
				"\tvar target = backdrop.userData.cTarget;",
				"",
				"\tif ( !backdrop.material.uniforms.cSource.value.equals( source ) ) {",
				"\t\tbackdrop.material.uniforms.cSource.value.lerp( source, drag );",
				"\t}",
				"\tif ( !backdrop.material.uniforms.cTarget.value.equals( target ) ) {",
				"\t\tbackdrop.material.uniforms.cTarget.value.lerp( target, drag );",
				"\t}",
				"",
				"\tbackdrop.material.uniforms.ambient.value = intensity;",
				"",
				"\treturn backdrop;",
				"",
				"};",
				"",
				"scene.add( backdrop );",
				"",
				"resources.set( 'backdrop', backdrop );"
			]
		],
		[
			"Interaction",
			[
				"var camera = resources.get( 'camera' );",
				"var renderer = resources.get( 'renderer' );",
				"var backdrop = resources.get( 'backdrop' );",
				"",
				"var interaction = new Interaction( renderer, camera );",
				"",
				"interaction.connect();",
				"",
				"for ( var i = 0; i < interaction.XRControllers.length; i++ ) {",
				"\tvar controller = interaction.XRControllers[ i ];",
				"\tvar laser = controller.userData.laser;",
				"\tvar material = laser.material;",
				"\tmaterial.emissive = backdrop.material.uniforms.cSource.value;",
				"}",
				"",
				"resources.set( 'interaction', interaction );"
			]
		],
		[
			"Ring",
			[
				"var scene = resources.get( 'scene' );",
				"var backdrop = resources.get( 'backdrop' );",
				"",
				"var radius = 250;",
				"var thickness = 33 * 2;",
				"var radialSegments = 4;",
				"var tubularSegments = 250;",
				"",
				"var geometry = new THREE.TorusBufferGeometry( radius, thickness / 2, radialSegments, tubularSegments );",
				"var material = new THREE.MeshPhysicalMaterial( {",
				"\tskinning: true,",
				"\tmetalness: 0.0,",
				"\treflectivity: 0.0,",
				"\troughness: 0.25,",
				"\tclearCoat: 1,",
				"\tclearCoatRoughness: 0.5",
				"} );",
				"",
				"material.color = backdrop.material.uniforms.cSource.value;",
				"geometry.rotateX( Math.PI / 2 );",
				"",
				"var bones = [];",
				"var amount = 24;",
				"var root = new THREE.Bone();",
				"bones.push( root );",
				"",
				"for ( var i = 0; i < amount; i++ ) {",
				"",
				"\tvar pct = i / amount;",
				"\tvar theta = pct * Math.PI * 2;",
				"\tvar bone = new THREE.Bone();",
				"",
				"\tbone.position.x = radius * Math.cos( theta );",
				"\tbone.position.z = radius * Math.sin( theta );",
				"\tbone.rotation.order = 'YXZ';",
				"\tbone.rotation.y = Math.atan2( - bone.position.x, - bone.position.z );",
				"",
				"\tbone.userData.theta = theta;",
				"\tbone.userData.euler = new THREE.Euler().copy( bone.rotation );",
				"",
				"\troot.add( bone );",
				"\tbones.push( bone );",
				"",
				"}",
				"",
				"var distanceBetweenBones = bones[ 5 ].position.distanceTo( bones[ 6 ].position );",
				"var positions = geometry.attributes.position;",
				"",
				"var weightResolution = 4;",
				"var indices = [];",
				"var weights = [];",
				"",
				"var v1 = new THREE.Vector3();",
				"var v2 = new THREE.Vector3();",
				"",
				"var sortedBones = [];",
				"",
				"for ( var i = 0; i < bones.length; i ++ ) {",
				"",
				"\tvar bone = bones[ i ];",
				"\tsortedBones.push( { id: i, bone: bone, distance: 0 } );",
				"",
				"}",
				"",
				"function getNearestBones( vertex ) {",
				"",
				"\tfor ( var i = 0; i < sortedBones.length; i ++ ) {",
				"",
				"\t\tvar boneData = sortedBones[ i ];",
				"\t\tboneData.bone.getWorldPosition( v2 );",
				"\t\tboneData.distance = vertex.distanceTo( v2 );",
				"",
				"\t}",
				"",
				"\tsortedBones.sort( function ( a, b ) { return a.distance - b.distance } );",
				"",
				"\treturn sortedBones;",
				"",
				"}",
				"",
				"for ( var i = 0, j = 0; i < positions.count * weightResolution; i += weightResolution, j += 3 ) {",
				"",
				"\tv1.fromArray( positions.array, j );",
				"",
				"\tvar data = getNearestBones( v1 );",
				"",
				"\tvar d0 = data[ 0 ];",
				"\tvar d1 = data[ 1 ];",
				"\tvar d2 = data[ 2 ];",
				"\tvar d3 = data[ 3 ];",
				"\t",
				"\tvar dd0 = d0.distance;",
				"\tvar dd1 = d1.distance;",
				"\tvar dd2 = d2.distance;",
				"\tvar dd3 = d3.distance;",
				"",
				"\tvar shortest = dd0;",
				"\tvar farthest = dd3;",
				"\tvar spread = distanceBetweenBones;",
				"\tvar smooth = TWEEN.Easing.Sinusoidal.Out;",
				"",
				"\tvar wd0 = ( ( dd0 - shortest ) / spread );",
				"\tvar wd1 = ( ( dd1 - shortest ) / spread );",
				"\tvar wd2 = ( ( dd2 - shortest ) / spread );",
				"\tvar wd3 = ( ( dd3 - shortest ) / spread );",
				"",
				"\twd0 = Math.min( wd0, 1 );",
				"\twd1 = Math.min( wd1, 1 );",
				"\twd2 = Math.min( wd2, 1 );",
				"\twd3 = Math.min( wd3, 1 );",
				"",
				"\twd0 = smooth( wd0 );",
				"\twd1 = smooth( wd1 );",
				"\twd2 = smooth( wd2 );",
				"\twd3 = smooth( wd3 );",
				"",
				"\twd0 = Math.floor( 100 * wd0 ) / 100;",
				"\twd1 = Math.floor( 100 * wd1 ) / 100;",
				"\twd2 = Math.floor( 100 * wd2 ) / 100;",
				"\twd3 = Math.floor( 100 * wd3 ) / 100;",
				"",
				"\twd0 = 1 - wd0;",
				"\twd1 = 1 - wd1;",
				"\twd2 = 1 - wd2;",
				"\twd3 = 1 - wd3;",
				"",
				"\tvar sum = wd0 + wd1 + wd2 + wd3;",
				"",
				"\twd0 /= sum;",
				"\twd1 /= sum;",
				"\twd2 /= sum;",
				"\twd3 /= sum;",
				"",
				"\tindices[ i + 0 ] = d0.id;",
				"\tindices[ i + 1 ] = d1.id;",
				"\tindices[ i + 2 ] = d2.id;",
				"\tindices[ i + 3 ] = d3.id;",
				"",
				"\tweights[ i + 0 ] = wd0;",
				"\tweights[ i + 1 ] = wd1;",
				"\tweights[ i + 2 ] = wd2;",
				"\tweights[ i + 3 ] = wd3;",
				"",
				"}",
				"",
				"geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( indices, weightResolution ) );",
				"geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( weights, weightResolution ) );",
				"",
				"var torus = new THREE.SkinnedMesh( geometry, material );",
				"",
				"torus.receiveShadow = true;",
				"",
				"torus.userData.root = root;",
				"torus.userData.radius = radius;",
				"torus.userData.thickness = thickness;",
				"",
				"torus.add( root );",
				"torus.bind( new THREE.Skeleton( bones ) );",
				"scene.add( torus );",
				"",
				"resources.set( 'ring', torus );"
			]
		],
		[
			"Button",
			[
				"var geometries = {",
				"\tcircle: new THREE.SphereBufferGeometry( 0.5, 32, 32 ),",
				"\tsquare: new THREE.BoxBufferGeometry( 1, 1, 1,  1, 1, 1 )",
				"};",
				"var materials = {",
				"\tinner: new THREE.MeshBasicMaterial( {",
				"\t\tcolor: 0x007f4b,",
				"\t\ttransparent: true,",
				"\t\tblending: THREE.AdditiveBlending",
				"\t} ),",
				"\touter: new THREE.MeshBasicMaterial( {",
				"\t\tcolor: 0x888888,",
				"\t\tside: THREE.BackSide,",
				"\t\ttransparent: true,",
				"\t\tblending: THREE.AdditiveBlending",
				"\t} )",
				"};",
				"",
				"function animateIn() {",
				"\tthis.userData.outline.userData.animateIn();",
				"}",
				"",
				"function animateOut() {",
				"\tthis.userData.outline.userData.animateOut();",
				"}",
				"",
				"resources.set( 'Button', {",
				"",
				"\tcreate: function( size, type ) {",
				"",
				"\t\tvar geometry;",
				"\t\t",
				"\t\tif ( !type ) {",
				"\t\t\ttype = 'circle';",
				"\t\t}",
				"",
				"\t\tgeometry = geometries[ type ].clone();",
				"\t\tgeometry.scale( size, size, size );",
				"",
				"\t\tvar button = new THREE.Mesh( geometry, materials.inner );",
				"\t\tvar outline = new THREE.Mesh( button.geometry, materials.outer );",
				"",
				"\t\toutline.userData.tween = new TWEEN.Tween( outline.scale );",
				"\t\toutline.userData.tween.easing( TWEEN.Easing.Circular.InOut );",
				"\t\toutline.userData.scales = {",
				"\t\t\tstart: 1.1,",
				"\t\t\tend: 1.33",
				"\t\t};",
				"",
				"\t\toutline.userData.animateIn = function() {",
				"\t\t\tvar scale = outline.userData.scales.end;",
				"\t\t\toutline.userData.tween.to( {",
				"\t\t\t\t\tx: scale, y: scale, z: scale",
				"\t\t\t\t}, 350 )",
				"\t\t\t\t.start();",
				"\t\t\treturn outline.userData.tween;",
				"\t\t};",
				"",
				"\t\toutline.userData.animateOut = function() {",
				"\t\t\tvar scale = outline.userData.scales.start;",
				"\t\t\toutline.userData.tween.to( {",
				"\t\t\t\t\tx: scale, y: scale, z: scale",
				"\t\t\t\t}, 350 )",
				"\t\t\t\t.start();",
				"\t\t\treturn outline.userData.tween;",
				"\t\t};",
				"",
				"\t\toutline.userData.animateOut();",
				"",
				"\t\tbutton.userData.outline = outline;",
				"\t\tbutton.add( outline );",
				"",
				"\t\tbutton.addEventListener( 'over', animateIn );",
				"\t\tbutton.addEventListener( 'out', animateOut );",
				"",
				"\t\treturn button;",
				"",
				"\t}",
				"",
				"} );"
			]
		],
		[
			"Playhead",
			[
				"var ring = resources.get( 'ring' );",
				"var scene = resources.get( 'scene' );",
				"var interaction = resources.get( 'interaction' );",
				"var manager = resources.get( 'audio-manager' );",
				"var Button = resources.get( 'Button' );",
				"var TWO_PI = Math.PI * 2;",
				"var HALF_PI = Math.PI / 2;",
				"var beats = manager.beats;",
				"var beatOffset = Math.floor( beats / manager.analysers.list.length );",
				"var identity = function() {};",
				"",
				"var loader = new THREE.TextureLoader();",
				"var group = new THREE.Group();",
				"",
				"var playhead = Button.create( 12 );",
				"var outline = playhead.userData.outline;",
				"",
				"playhead.visible = false;",
				"",
				"var radius = ring.userData.radius - ring.userData.thickness * 0.95;",
				"",
				"var geometry = new THREE.BufferGeometry();",
				"var vertices = [];",
				"",
				"for ( var i = 0; i < beats; i++ ) {",
				"",
				"\tvar theta = TWO_PI * ( i / beats );",
				"\tvar x = radius * Math.cos( theta );",
				"\tvar y = 0;",
				"\tvar z = radius * Math.sin( theta );",
				"\tvar paddles = Math.floor( i / 16 );",
				"",
				"\t// Skip every 16th line because",
				"\t// that line is drawn in \"paddles\"",
				"\tif ( paddles >= 8 || i % 16 ) {",
				"\t\tvar offset = 0.5;",
				"\t\tif ( !( i % 4 ) ) {",
				"\t\t\toffset = 1;",
				"\t\t}",
				"\t\tvertices.push( x, y - offset, z );",
				"\t\tvertices.push( x, y + offset, z );",
				"\t}",
				"",
				"}",
				"",
				"var positionAttribute = new THREE.Float32BufferAttribute( vertices, 3 );",
				"geometry.addAttribute( 'position', positionAttribute );",
				"",
				"var ruler = new THREE.LineSegments(",
				"\tgeometry,",
				"\tnew THREE.LineBasicMaterial( {",
				"\t\tcolor: 0x000000,",
				"\t\tlinewidth: 1",
				"\t} )",
				");",
				"",
				"ruler.scale.y = 4;",
				"",
				"var cylinder = new THREE.Mesh(",
				"\tnew THREE.CylinderBufferGeometry( 0.5, 0.5, 1, 64, 1, true ),",
				"\tnew THREE.MeshBasicMaterial( {",
				"\t\tcolor: 0xffffff,",
				"\t\ttransparent: true,",
				"\t\tside: THREE.BackSide,",
				"\t\tmap: loader.load( '../assets/textures/baseline.gif' ),",
				"\t\topacity: 0",
				"\t} )",
				");",
				"cylinder.renderOrder = 100;",
				"cylinder.material.map.generateMipMaps = false;",
				"cylinder.material.map.minFilter = THREE.LinearFilter;",
				"cylinder.material.map.magFilter = THREE.LinearFilter;",
				"cylinder.material.map.wrapS = THREE.RepeatWrapping;",
				"cylinder.material.map.wrapT = THREE.RepeatWrapping;",
				"cylinder.material.map.repeat.set( 1, 5 );",
				"",
				"var textureOffsetMargin = 0.8;",
				"",
				"cylinder.userData.y = 0;",
				"cylinder.userData.tween = new TWEEN.Tween( cylinder.material );",
				"cylinder.userData.tween.easing( TWEEN.Easing.Sinusoidal.InOut );",
				"",
				"cylinder.userData.animateIn = function( complete ) {",
				"\tcylinder.userData.tween",
				"\t\t.onComplete( complete || identity )",
				"\t\t.to( {",
				"\t\t\topacity: 1",
				"\t\t}, 150 )",
				"\t\t.start();",
				"\treturn cylinder.userData.tween;",
				"};",
				"cylinder.userData.animateOut = function( complete ) {",
				"\tcylinder.userData.tween",
				"\t\t.onComplete( complete || identity )",
				"\t\t.to( {",
				"\t\t\topacity: 0",
				"\t\t}, 350 )",
				"\t\t.start();",
				"\treturn cylinder.userData.tween;",
				"};",
				"",
				"cylinder.visible = false;",
				"",
				"playhead.userData.update = function( progress ) {",
				"",
				"\tvar theta = null;",
				"\tvar radius = ring.userData.radius - ring.userData.thickness;",
				"",
				"\tif ( cylinder.userData.controller ) {",
				"",
				"\t\t// Override tweens while dragging",
				"\t\tif ( outline.scale.x !== outline.userData.scales.end ) {",
				"\t\t\toutline.scale.x = outline.userData.scales.end;",
				"\t\t\toutline.scale.y = outline.userData.scales.end;",
				"\t\t\toutline.scale.z = outline.userData.scales.end;",
				"\t\t}",
				"",
				"\t\tvar id = cylinder.userData.controller.uuid;",
				"\t\tvar intersection = interaction.intersections[ id ];",
				"",
				"\t\tif ( intersection && intersection.object.uuid === cylinder.uuid ) {",
				"",
				"\t\t\t// Assumes camera is at 0, 0, 0",
				"\t\t\tvar point = intersection.point;",
				"\t\t\tvar line = Math.round( 4 * point.y / cylinder.scale.y );",
				"",
				"\t\t\ttheta = Math.atan2( point.z, point.x ) - HALF_PI;",
				"\t\t\tcylinder.userData.y = line * ( cylinder.scale.y * textureOffsetMargin ) / 4;",
				"",
				"\t\t\tplayhead.dispatchEvent( {",
				"\t\t\t\ttype: 'drag',",
				"\t\t\t\ttheta: theta,",
				"\t\t\t\tprogress: mod( ( ( theta - Math.PI * 1.5 ) ), TWO_PI ) / TWO_PI,",
				"\t\t\t\tline: line",
				"\t\t\t} );",
				"",
				"\t\t}",
				"",
				"\t} else {",
				"",
				"\t\ttheta = progress * TWO_PI + Math.PI * 1.5;",
				"",
				"\t}",
				"",
				"\tif ( theta !== null ) {",
				"",
				"\t\t// Snap to seconds",
				"\t\ttheta = snap( theta ) + HALF_PI;",
				"\t\tvar x = radius * Math.cos( theta );",
				"\t\tvar z = radius * Math.sin( theta );",
				"",
				"\t\t// Ease into position",
				"\t\tplayhead.position.x += ( x - playhead.position.x ) * 0.33;",
				"\t\tplayhead.position.z += ( z - playhead.position.z ) * 0.33;",
				"",
				"\t}",
				"",
				"\tvar y = cylinder.userData.y;",
				"\tgroup.position.y += ( y - group.position.y ) * 0.33;",
				"",
				"\treturn playhead;",
				"",
				"};",
				"",
				"group.add( ruler );",
				"group.add( playhead );",
				"scene.add( group );",
				"scene.add( cylinder );",
				"",
				"//",
				"",
				"interaction.listen( playhead );",
				"interaction.listen( cylinder );",
				"",
				"playhead.addEventListener( 'primary-down', pointerdown );",
				"",
				"function pointerdown( e ) {",
				"",
				"\tvar radius = ring.userData.radius - ring.userData.thickness;",
				"",
				"\tcylinder.scale.x = radius * 2;",
				"\tcylinder.scale.z = radius * 2;",
				"\tcylinder.scale.y = 100;\t// TODO: Don't hardcode!",
				"",
				"\tcylinder.visible = true;",
				"\tcylinder.userData.controller = e.controller;",
				"\tcylinder.userData.animateIn();",
				"",
				"\tinteraction.ignore( playhead );",
				"\tinteraction.addEventListener( 'primary-up', pointerup );",
				"\tplayhead.dispatchEvent( { type: 'focus' } );",
				"",
				"}",
				"",
				"function pointerup( e ) {",
				"",
				"\toutline.userData.animateOut();",
				"\tcylinder.userData.animateOut( hideCylinder );",
				"\tdelete cylinder.userData.controller;",
				"",
				"\tinteraction.listen( playhead );",
				"\tinteraction.removeEventListener( 'primary-up', pointerup );",
				"\tplayhead.dispatchEvent( { type: 'blur' } );",
				"",
				"}",
				"",
				"function hideCylinder() {",
				"\tcylinder.visible = false;",
				"}",
				"",
				"function mod( v, l ) {",
				"\twhile ( v < 0 ) {",
				"\t\tv += l;",
				"\t}",
				"\treturn v % l;",
				"}",
				"",
				"function snap( v ) {",
				"\tvar r = Math.round( beats * v / TWO_PI );",
				"\treturn TWO_PI * ( r / beats );",
				"}",
				"",
				"resources.set( 'playhead', playhead );"
			]
		],
		[
			"Paddles",
			[
				"var HALF_PI = Math.PI / 2;",
				"var TWO_PI = Math.PI * 2;",
				"",
				"var manager = resources.get( 'audio-manager' );",
				"var scene = resources.get( 'scene' );",
				"var interaction = resources.get( 'interaction' );",
				"var ring = resources.get( 'ring' );",
				"var Button = resources.get( 'Button' );",
				"",
				"var beats = manager.beats;",
				"var beatOffset = Math.floor( beats / manager.analysers.list.length );",
				"var range = 100;",
				"var halfRange = range / 2;",
				"var snaps = 8;",
				"",
				"var paddles = new THREE.Group();",
				"var activePaddles = [];",
				"",
				"scene.add( paddles );",
				"",
				"var radius = ring.userData.radius - ring.userData.thickness * 0.95;",
				"",
				"var filters = manager.filters.list;",
				"var analysers = manager.analysers;",
				"var bones = ring.userData.root.children;",
				"var k = - 1;",
				"",
				"var geometry = new THREE.BufferGeometry();",
				"var vertices = [];",
				"",
				"var plane = new THREE.Mesh(",
				"\tnew THREE.PlaneBufferGeometry( 1000, 1000, 1, 1 ),",
				"\tnew THREE.MeshBasicMaterial( {",
				"\t\tcolor: 0x000000,",
				"\t\ttransparent: true,",
				"\t\topacity: 0,",
				"\t\twireframe: true",
				"\t} )",
				");",
				"",
				"plane.renderOrder = 100;",
				"plane.visible = false;",
				"paddles.add( plane );",
				"// interaction.listen( plane );",
				"",
				"for ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\tvar offset = i / bones.length;",
				"\tvar pct = ( i + offset ) / bones.length;",
				"\tvar j = Math.floor( pct * filters.length );",
				"",
				"\tvar bone = bones[ i ];",
				"\tvar filter = filters[ j ];",
				"",
				"\tif ( k === j ) {",
				"\t\tcontinue;",
				"\t}",
				"",
				"\tvar paddle = Button.create( 8, 'square' );",
				"\tvar theta = TWO_PI * ( j * beatOffset ) / beats;",
				"",
				"\tvar ct = Math.cos( theta );",
				"\tvar st = Math.sin( theta );",
				"",
				"\tpaddle.userData.name = filter.name;",
				"\tpaddle.userData.isPaddle = true;",
				"\tpaddle.position.x = radius * ct;",
				"\tpaddle.position.z = radius * st;",
				"",
				"\t// Offset line position so no z-fighting",
				"\tvar x = ( radius + 2 ) * ct;",
				"\tvar y = 0;",
				"\tvar z = ( radius + 2 ) * st;",
				"",
				"\tvertices.push( x, y - halfRange, z );",
				"\tvertices.push( x, y + halfRange, z );",
				"",
				"\tct = Math.cos( theta + HALF_PI );",
				"\tst = Math.sin( theta + HALF_PI );",
				"",
				"\tvertices.push( x - ct, y + halfRange, z - st );",
				"\tvertices.push( x + ct, y + halfRange, z + st );",
				"",
				"\tvertices.push( x - ct, y - halfRange, z - st );",
				"\tvertices.push( x + ct, y - halfRange, z + st );",
				"",
				"\tpaddle.userData.name = filter.name;",
				"\tpaddle.userData.index = i;",
				"\tpaddle.userData.plane = plane.clone();",
				"\tpaddle.userData.plane.position.copy( paddle.position );",
				"\tpaddle.userData.plane.lookAt( paddles.position );",
				"",
				"\tpaddle.lookAt( paddles.position );",
				"",
				"\tpaddles.add( paddle );",
				"\tpaddles.add( paddle.userData.plane );",
				"",
				"\tinteraction.listen( paddle );",
				"\tinteraction.listen( paddle.userData.plane );",
				"\tpaddle.addEventListener( 'primary-down', onPrimaryDown );",
				"",
				"\tk = j;",
				"",
				"}",
				"",
				"var positionAttribute = new THREE.Float32BufferAttribute( vertices, 3 );",
				"geometry.addAttribute( 'position', positionAttribute );",
				"",
				"var lines = new THREE.LineSegments(",
				"\tgeometry,",
				"\tnew THREE.LineBasicMaterial( {",
				"\t\tcolor: 0x000000,",
				"\t\tlinewidth: 1",
				"\t} )",
				");",
				"",
				"paddles.add( lines );",
				"",
				"function onPrimaryDown( e ) {",
				"",
				"\tvar current = this;",
				"\tvar controller = e.controller;",
				"",
				"\tif ( isActive( current ) ) {",
				"\t\treturn;",
				"\t}",
				"",
				"\tactivePaddles.push( current );",
				"",
				"\tcurrent.userData.controller = controller;",
				"",
				"\tvar plane = current.userData.plane;",
				"\tplane.visible = true;",
				"",
				"\tinteraction.ignore( current );",
				"\tcurrent.dispatchEvent( {",
				"\t\ttype: 'focus',",
				"\t\tcontroller: controller",
				"\t} );",
				"",
				"\tif ( activePaddles.length <= 1 ) {",
				"\t\t// This means we're already listening",
				"\t\tinteraction.addEventListener( 'primary-up', onPrimaryUp );",
				"\t}",
				"",
				"}",
				"",
				"function onPrimaryUp( e ) {",
				"",
				"\tvar controller = e.controller;",
				"\tvar paddles = activePaddles.slice( 0 );",
				"",
				"\tfor ( var i = 0; i < paddles.length; i++ ) {",
				"",
				"\t\tvar current = paddles[ i ];",
				"\t\tvar plane = current.userData.plane;",
				"",
				"\t\tif ( current.userData.controller.uuid !== controller.uuid ) {",
				"\t\t\tcontinue;",
				"\t\t}",
				"",
				"\t\tplane.visible = false;",
				"\t\tinteraction.listen( current );",
				"\t\tcurrent.userData.outline.userData.animateOut();",
				"\t\tdelete current.userData.controller;",
				"",
				"\t\tvar index = indexOfActivePaddles( current );",
				"\t\tif ( index >= 0 ) {",
				"\t\t\tactivePaddles.splice( index, 1 );",
				"\t\t}",
				"\t\tcurrent.dispatchEvent( {",
				"\t\t\ttype: 'blur',",
				"\t\t\tcontroller: controller",
				"\t\t} );",
				"",
				"\t}",
				"",
				"\tif ( activePaddles.length <= 0 ) {",
				"\t\t// Only stop listening to 'primary-up' if",
				"\t\t// this is the last active paddle.",
				"\t\tinteraction.removeEventListener( 'primary-up', onPrimaryUp );",
				"\t}",
				"",
				"}",
				"",
				"function isActive( paddle ) {",
				"\tfor ( var i = 0; i < activePaddles.length; i++ ) {",
				"\t\tvar active = activePaddles[ i ];",
				"\t\tif ( active.uuid === paddle.uuid ) {",
				"\t\t\treturn true;",
				"\t\t}",
				"\t}",
				"\treturn false;",
				"}",
				"",
				"function indexOfActivePaddles( paddle ) {",
				"\tfor ( var i = 0; i < activePaddles.length; i++ ) {",
				"\t\tvar active = activePaddles[ i ];",
				"\t\tif ( active.uuid === paddle.uuid ) {",
				"\t\t\treturn i;",
				"\t\t}",
				"\t}",
				"\treturn - 1;",
				"}",
				"",
				"paddles.userData.update = function( progress ) {",
				"",
				"\tif ( activePaddles.length > 0 ) {",
				"",
				"\t\tfor ( var j = 0; j < activePaddles.length; j++ ) {",
				"",
				"\t\t\tvar current = activePaddles[ j ];",
				"\t\t\tvar outline = current.userData.outline;",
				"\t\t\tvar plane = current.userData.plane;",
				"\t\t\tvar controller = current.userData.controller;",
				"",
				"\t\t\t// Override tweens while dragging",
				"\t\t\tif ( outline.scale.x !== outline.userData.scales.end ) {",
				"\t\t\t\toutline.scale.x = outline.userData.scales.end;",
				"\t\t\t\toutline.scale.y = outline.userData.scales.end;",
				"\t\t\t\toutline.scale.z = outline.userData.scales.end;",
				"\t\t\t}",
				"",
				"\t\t\tvar intersection = interaction.intersections[ controller.uuid ];",
				"",
				"\t\t\tif ( intersection && intersection.object.uuid === plane.uuid ) {",
				"",
				"\t\t\t\t// Assumes camera is at 0, 0, 0 ~ish",
				"\t\t\t\tvar point = intersection.point;",
				"\t\t\t\tvar y = Math.max( Math.min( point.y, halfRange ), - halfRange );",
				"",
				"\t\t\t\tif ( current.position.y !== y ) {",
				"\t\t\t\t\tvar t = y / halfRange;",
				"\t\t\t\t\tupdate( t, current );",
				"\t\t\t\t}",
				"",
				"\t\t\t}",
				"",
				"\t\t}",
				"",
				"\t} else {",
				"",
				"\t\tfor ( var i = 0; i < paddles.children.length; i++ ) {",
				"",
				"\t\t\tvar paddle = paddles.children[ i ];",
				"\t\t\tvar name = paddle.userData.name;",
				"\t\t\tvar analyser = analysers[ name ];",
				"",
				"\t\t\tif ( analyser ) {",
				"\t\t\t\tvar data = analyser.data[ 3 ];",
				"\t\t\t\tvar value = data / 255 + 1;",
				"\t\t\t\tpaddle.scale.x = value;",
				"\t\t\t\tpaddle.scale.y = value;",
				"\t\t\t}",
				"",
				"\t\t}",
				"",
				"\t}",
				"",
				"\treturn paddles;",
				"",
				"};",
				"",
				"function update( t, paddle ) {",
				"",
				"\tt *= snaps;",
				"",
				"\tif ( t < 0 ) {",
				"\t\tt = Math.ceil( t ) / snaps;",
				"\t} else {",
				"\t\tt = Math.floor( t ) / snaps;",
				"\t}",
				"",
				"\tvar name = paddle.userData.name;",
				"\tvar index = paddle.userData.index;",
				"",
				"\tvar filter = manager.filters[ name ];",
				"\tvar bone = bones[ index ];",
				"",
				"\tpaddle.position.y = t * range * 0.5;",
				"\tfilter.setTransform( t );",
				"",
				"\tvar sign = t > 0 ? 1 : - 1;",
				"\tvar magnitude = Math.abs( t );",
				"",
				"\tt = sign * Math.pow( magnitude, 0.5 );",
				"\tbone.rotation.x = t * Math.PI;",
				"",
				"\t// Graduate twist on adjacent bones",
				"\tbone = bones[ mod( index + 1, bones.length ) ];",
				"\tbone.rotation.x = 0.5 * t * Math.PI;",
				"",
				"\tbone = bones[ mod( index - 1, bones.length ) ];",
				"\tbone.rotation.x = 0.5 * t * Math.PI;",
				"\t",
				"\t// TODO: This is where you'd scale the bones",
				"\t// based on the FFT of that audio track, I think",
				"\t//\tbone.scale.x = paddle.scale.x;",
				"\t//\tbone.scale.y = paddle.scale.x;",
				"\t//\tbone.scale.z = paddle.scale.x;",
				"",
				"}",
				"",
				"function mod( v, l ) {",
				"\twhile ( v < 0 ) {",
				"\t\tv += l;",
				"\t}",
				"\treturn v % l;",
				"}",
				"",
				"resources.set( 'paddles', paddles );",
				""
			]
		],
		[
			"Lights",
			[
				"var scene = resources.get( 'scene' );",
				"var paddles = resources.get( 'paddles' );",
				"var group = new THREE.Group();",
				"var vector = new THREE.Vector3();",
				"",
				"var ambient = new THREE.HemisphereLight( 0xFEFCFF, 0xB0ADAA, 0.9 );",
				"",
				"ambient.userData.tween = new TWEEN.Tween( ambient );",
				"ambient.userData.tween.easing( TWEEN.Easing.Circular.Out );",
				"ambient.userData.intensity = ambient.intensity;",
				"",
				"scene.add( ambient );",
				"group.userData.ambient = ambient;",
				"",
				"var amount = 2;",
				"var size = 500;",
				"",
				"function setup () {",
				"",
				"\tvar direction = new THREE.Vector3( 0, 0, 1 );",
				"\tvar origin = new THREE.Vector3();",
				"\tvar length = 10;",
				"\tvar color = 'red';",
				"",
				"\tfor ( var i = 0; i < amount; i++ ) {",
				"",
				"\t\tvar pct = i / ( amount - 1 );",
				"\t\tvar light = new THREE.SpotLight( 0xFFFFFF, 1.33 );",
				"",
				"\t\tlight.distance = 1000;",
				"\t\tlight.angle = Math.PI * 0.1;",
				"\t\tlight.penumbra = 1;",
				"\t\tlight.decay = 2;",
				"",
				"\t\tlight.target.userData.reference = group;",
				"",
				"\t\tlight.position.y = size * 0.7;",
				"\t\tlight.position.z = size * pct - size / 2;",
				"",
				"\t\t// light.userData.helper = new THREE.SpotLightHelper( light, color );",
				"",
				"\t\tlight.castShadow = true;",
				"\t\tlight.shadow.mapSize.width = 1024;",
				"\t\tlight.shadow.mapSize.height = 1024;",
				"\t\tlight.shadow.camera.near = 50;",
				"\t\tlight.shadow.camera.far = 500;",
				"",
				"\t\tgroup.add( light );",
				"\t\t// scene.add( light.userData.helper );",
				"\t\tscene.add( light.target );",
				"",
				"\t}",
				"",
				"\tgroup.userData.update = update;",
				"\tscene.add( group );",
				"",
				"}",
				"",
				"function update () {",
				"",
				"\tfor ( var i = 0; i < group.children.length; i++ ) {",
				"",
				"\t\tvar light = group.children[ i ];",
				"",
				"\t\tif ( light.target.userData.reference ) {",
				"",
				"\t\t\tvector.copy( light.target.userData.reference.position );",
				"\t\t\tvector.sub( light.target.position );",
				"\t\t\tvector.multiplyScalar( 0.2 );",
				"",
				"\t\t\tlight.target.position.add( vector );",
				"",
				"\t\t}",
				"",
				"\t\tif ( light.userData.helper ) {",
				"\t\t\tlight.userData.helper.update();",
				"\t\t}",
				"",
				"\t}",
				"",
				"\treturn group;",
				"",
				"}",
				"",
				"setup();",
				"resources.set( 'lights', group );"
			]
		],
		[
			"Debris",
			[
				"var scene = resources.get( 'scene' );",
				"var camera = resources.get( 'camera' );",
				"var amount = 10000;",
				"var radius = 50;",
				"",
				"var geometry = new THREE.BufferGeometry();",
				"var positions = [];",
				"var sizes = [];",
				"var lifeTimes = [];",
				"var rotations = [];",
				"",
				"var vertexShader = [",
				"",
				"\t'uniform float time;',",
				"\t'uniform vec3 wind;',",
				"\t'uniform float turbulence;',",
				"",
				"\t'attribute float size;',",
				"\t'attribute float life;',",
				"\t'attribute vec3 axisRotation;',",
				"",
				"\t'varying float lived;',",
				"\t'varying vec3 particle;',",
				"\t'varying vec3 up;',",
				"\t'varying float range;',",
				"",
				"\t'float noise( float p ) {',",
				"\t  'return sin( p );',",
				"\t'}',",
				"",
				"\t'void main() {',",
				"",
				"\t  'float amp = 1000.0;',",
				"\t  'float variation = pow( size, 0.33 );',",
				"\t  'float lifetime = life * amp;',",
				"\t  'float radius = amp / ( 10.0 * 2.0 );',",
				"",
				"\t  'lived = mod( time, lifetime ) / lifetime;',",
				"",
				"\t  'vec3 destination = position + variation * wind * lived;',",
				"\t  'vec3 field = vec3(',",
				"\t\t'( wind.y + wind.z ) * noise( destination.y + destination.z ),',",
				"\t\t'( wind.x + wind.z ) * noise( destination.x + destination.z ),',",
				"\t\t'( wind.x + wind.y ) * noise( destination.x + destination.y )',",
				"\t  ');',",
				"\t  'field *= turbulence;',",
				"",
				"\t  'vec3 pos = mix( destination, destination + field, lived );',",
				"      'vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );',",
				"",
				"\t  'particle = pos;',",
				"\t  'up = axisRotation;',",
				"\t  'range = smoothstep( radius * 0.95, radius, length( pos ) );',",
				"",
				"\t  'gl_PointSize = size * 10.0;',",
				"\t  'gl_Position = projectionMatrix * mvPosition;',",
				"",
				"\t'}'",
				"",
				"].join( '\\n' );",
				"",
				"var fragmentShader = [",
				"",
				"\t'const float PI = 3.141592653589793;',",
				"",
				"\t'uniform float time;',",
				"\t'uniform vec3 specular;',",
				"\t'uniform vec3 camera;',",
				"",
				"\t'varying float lived;',",
				"\t'varying vec3 particle;',",
				"\t'varying vec3 up;',",
				"\t'varying float range;',",
				"",
				"\t'mat3 setCamera( in vec3 ro, in vec3 ta, float cr ) {',",
				"",
				"\t  'vec3 cw = normalize( ta - ro );',",
				"\t  'vec3 cp = vec3( sin( cr ), cos( cr ), 0.0 );',",
				"\t  'vec3 cu = normalize( cross( cw, cp ) );',",
				"\t  'vec3 cv = normalize( cross( cu, cw ) );',",
				"",
				"\t  'return mat3( cu, cv, cw );',",
				"",
				"\t'}',",
				"",
				"\t'float sdCapsule( in vec3 p, vec3 a, vec3 b, float r ) {',",
				"\t  'vec3 pa = p - a, ba = b - a;',",
				"\t  'float h = clamp( dot( pa, ba )/dot( ba, ba ), 0.0, 1.0 );',",
				"\t  'return length( pa - ba * h ) - r;',",
				"\t'}',",
				"",
				"\t'vec2 map( in vec3 sight ) {',",
				"",
				"\t  '// Of the object',",
				"\t  'vec3 position = vec3( 0.0 );',",
				"\t  '// The vec3 position of the left side of capsule',",
				"\t  'vec3 a = vec3( - 1.25, 0.0, 0.0 );',",
				"\t  '// The vec3 position of the right side of capsule',",
				"\t  'vec3 b = vec3( 1.25, 0.0, 0.0 );',",
				"\t  '// Radius of the capsule',",
				"\t  'float radius = 0.33;',",
				"",
				"\t  '// Define position in relation to the camera',",
				"\t  'position = sight - position;',",
				"\t  'vec3 worldPosition = position;',",
				"",
				"\t  'float sdf = sdCapsule( worldPosition, a, b, radius );',",
				"\t  'vec2 res = vec2( sdf, 0.0 );',",
				"",
				"\t  'return res;',",
				"",
				"\t'}',",
				"",
				"\t'vec2 castRay( in vec3 ro, in vec3 rd ) {',",
				"",
				"\t  '// Near / Far Clipping Plane',",
				"\t  'float tmin = 1.0;',",
				"\t  'float tmax = 50.0;',",
				"",
				"\t  'float t = tmin;',",
				"\t  'float m = - 1.0;',",
				"",
				"\t  '// TODO: Why does it need so many iterations',",
				"\t  '// to march correctly?',",
				"\t  'for( int i = 0; i < 128; i++ ) {',",
				"",
				"\t\t'float precis = 0.0004 * t;',",
				"\t\t'vec2 res = map( ro + rd * t );',",
				"",
				"\t\t'// Means no intersection',",
				"\t\t'// and no possibility of checking again',",
				"\t\t'// so stop the Ray Marching',",
				"\t\t'if ( res.x < precis || t > tmax ) break;',",
				"",
				"\t\t  't += res.x;',",
				"\t\t  'm = res.y; // Identify which shape was intersected via a float',",
				"",
				"\t\t'}',",
				"",
				"\t\t'if( t > tmax ) m =- 1.0;',",
				"\t\t'return vec2( t, m );',",
				"",
				"\t'}',",
				"",
				"\t'// https://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/',",
				"\t'vec4 quat_from_axis_angle( vec3 axis, float angle ) {',",
				"\t  'float half_angle = angle * 0.5;',",
				"\t  'float s = sin( half_angle );',",
				"\t  'return vec4( axis.xyz * s, cos( half_angle ) );',",
				"\t'}',",
				"",
				"\t'// https://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/',",
				"\t'vec3 rotate( vec3 position, vec3 axis, float angle ) {',",
				"\t  'vec4 q = quat_from_axis_angle( axis, angle );',",
				"\t  'vec3 v = position.xyz;',",
				"\t  'return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );',",
				"\t'}',",
				"",
				"\t'void main() {',",
				"",
				"\t  'float theta = ( time / 1000.0 ) * length( up );',",
				"\t  'theta = mod( theta, PI * 2.0 );',",
				"",
				"\t  'vec2 uv = 2.0 * vec2( gl_PointCoord ) - 1.0;',",
				"\t  'vec3 ro = normalize( camera - particle );',",
				"",
				"\t  'ro = rotate( ro, up, theta );',",
				"\t  'ro *= 10.0 / length( ro );',",
				"",
				"\t  'vec3 ta = vec3( 0.0, 0.0, 0.0 );',",
				"\t  'mat3 ca = setCamera( ro, ta, 0.0 );',",
				"",
				"\t  'vec3 rd = ca * normalize( vec3( uv.xy, 5.0 ) );',",
				"\t  'vec2 res = castRay( ro, rd );',",
				"",
				"\t  'float t = res.x;',",
				"\t  'float m = res.y;',",
				"\t  'float alpha = step( 0.0, m );',",
				"",
				"\t  'vec3 texel = specular;',",
				"\t  'float easeInOut = sin( lived * PI );',",
				"\t  'float spherical = 1.0 - range;',",
				"",
				"\t  'gl_FragColor = vec4( texel, alpha * easeInOut * spherical );',",
				"",
				"\t'}'",
				"",
				"].join( '\\n' );",
				"",
				"for ( var i = 0; i < amount; i++ ) {",
				"",
				"  positions.push( ( 2 * Math.random() - 1 ) * radius );",
				"  positions.push( ( 2 * Math.random() - 1 ) * radius );",
				"  positions.push( ( 2 * Math.random() - 1 ) * radius );",
				"",
				"  sizes.push( Math.random() );",
				"  lifeTimes.push( Math.random() * 19 + 1 );",
				"",
				"  rotations.push( ( 2 * Math.random() - 1 ) );",
				"  rotations.push( ( 2 * Math.random() - 1 ) );",
				"  rotations.push( ( 2 * Math.random() - 1 ) );",
				"",
				"}",
				"",
				"geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( positions, 3 ) );",
				"geometry.addAttribute( 'size', new THREE.Float32BufferAttribute( sizes, 1 ) );",
				"geometry.addAttribute( 'life', new THREE.Float32BufferAttribute( lifeTimes, 1 ) );",
				"geometry.addAttribute( 'axisRotation', new THREE.Float32BufferAttribute( rotations, 3 ) );",
				"",
				"var material = new THREE.ShaderMaterial({",
				"  uniforms: {",
				"\tspecular: { type: 'c', value: new THREE.Color( 1, 1, 1 ) },",
				"\twind: { type: 'v3', value: new THREE.Vector3( 0, 2, 10 ) },",
				"\ttime: { type: 'f', value: 0 },",
				"\tturbulence: { type: 'f', value: 0.05 },",
				"\tcamera: { type: 'v3', value: camera.position }",
				"  },",
				"  vertexShader: vertexShader,",
				"  fragmentShader: fragmentShader,",
				"  transparent: true,",
				"  depthTest: false",
				"});",
				"",
				"var debris = new THREE.Points( geometry, material );",
				"debris.renderOrder = 150;",
				"",
				"scene.add( debris );",
				"",
				"resources.set( 'debris', debris );"
			]
		],
		[
			"Lyrics",
			[
				"var renderer = resources.get( 'renderer' );",
				"var camera = resources.get( 'camera' );",
				"var scene = resources.get( 'scene' );",
				"var words = [",
				"\t\"i'd\", \"beat\", \"up\", \"all\", \"my\", \"cues\", \"for\", \"you\", \"take\", ",
				"\t\"it\", \"off\", \"too\", \"soon\", \"some\", \"other\", \"way\", \"to\", \"get\", ",
				"\t\"now\", \"give\", \"fears\", \"when\", \"know\", \"what\", \"need\", \"and\",",
				"\t\"did\", \"come\", \"at\", \"me\", \"want\", \"do\", \"anything\", \"but\", \"upset\", ",
				"\t\" i \", \"feel\", \"like\", \"could\", \"comfort\", \"so\", \"let\", \"by\", \"your\",",
				"\t\"hand\",\"walk\",\"beside\",\"into\",\"something\",\"good\",\"oh\",\"don't\"",
				"];",
				"",
				"var radiusOffset = 50;",
				"var radius = 50;",
				"var rows = 2;",
				"var amount = Math.floor( words.length / rows );",
				"",
				"var group = new THREE.Group();",
				"group.visible = false;",
				"",
				"var geometry = new THREE.PlaneBufferGeometry( 1, 1, 4, 4 );",
				"var material = new THREE.ShaderMaterial( {",
				"\tuniforms: {",
				"\t\tflipped: { type: 'b', value: false },",
				"\t\timage: { type: 't', value: null },",
				"\t\tinner: { type: 'f', value: 0.75 },",
				"\t\touter: { type: 'f', value: 0.98 }",
				"\t},",
				"\tvertexShader: [",
				"",
				"\t\t'uniform float inner;',",
				"\t\t'uniform float outer;',",
				"\t\t",
				"\t\t'varying vec2 vUv;',",
				"",
				"\t\t'void main() {',",
				"",
				"\t\t\t'vUv = uv;',",
				"\t\t\t'vec3 pos = vec3( position.xyz );',",
				"//\t\t\t'pos.z *= mix( inner, outer, pos.x + 0.5 );',",
				"",
				"\t\t\t'vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );',",
				"\t\t\t'gl_Position = projectionMatrix * mvPosition;',",
				"",
				"\t\t'}'",
				"",
				"\t].join( '\\n' ),",
				"\tfragmentShader: [",
				"",
				"\t\t'uniform bool flipped;',",
				"\t\t'uniform sampler2D image;',",
				"",
				"\t\t'varying vec2 vUv;',",
				"",
				"\t\t'void main() {',",
				"",
				"\t\t\t'vec2 uv = vec2( vUv.xy );',",
				"\t\t\t'if ( flipped ) {',",
				"\t\t\t\t'uv.x = 1.0 - uv.x;',",
				"\t\t\t'}',",
				"\t\t\t'vec4 texel = texture2D( image, uv );',",
				"\t\t\t'gl_FragColor = texel;',",
				"//\t\t\t'gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );',",
				"",
				"\t\t'}'",
				"",
				"\t].join( '\\n' ),",
				"\twireframe: false,",
				"\ttransparent: true,",
				"\tdepthTest: false,",
				"\tside: THREE.DoubleSide",
				"} );",
				"",
				"geometry.rotateX( - Math.PI / 2 );",
				"",
				"useDefaultStyles( setup );",
				"",
				"var circle = {",
				"\tvertices: {",
				"\t\ttop: [],",
				"\t\tbottom: [],",
				"\t},",
				"\tgeometry: new THREE.BufferGeometry(),",
				"\tmaterial: new THREE.LineBasicMaterial( {",
				"\t\tcolor: 'black'",
				"\t} )",
				"};",
				"",
				"function setup() {",
				"",
				"\tif ( group.children.length <= 0 ) {",
				"\t\tcreateCard( 0 );",
				"\t}",
				"",
				"}",
				"",
				"function createCard( wid ) {",
				"",
				"\tif ( wid >= words.length ) {",
				"",
				"\t\tcreateCircle();",
				"\t\tgroup.visible = true;",
				"",
				"\t\treturn;",
				"\t}",
				"",
				"\tvar i = Math.floor( wid / rows );",
				"\tvar j = wid % rows;",
				"",
				"\tvar pct = i / amount;",
				"\tvar theta = pct * Math.PI * 2;",
				"",
				"\tvar r = radius + radiusOffset;",
				"\tvar x = Math.cos( theta );",
				"\tvar y = 1.5 * radius * ( 2 * j / ( rows - 1 ) - 1 );",
				"\tvar z = Math.sin( theta );",
				"\tvar word = words[ wid ].toUpperCase();",
				"",
				"\tvar canvas = updateText( word );",
				"\tvar texture = new THREE.Texture( canvas );",
				"\tvar mesh = new THREE.Mesh( geometry, material.clone() );",
				"",
				"\ttexture.minFilter = THREE.LinearFilter;",
				"\ttexture.magFilter = THREE.LinearFilter;",
				"\ttexture.generateMipMaps = false;",
				"\ttexture.needsUpdate = true;",
				"",
				"\tmesh.material.uniforms.image.value = texture;",
				"\tmesh.material.uniforms.flipped.value = j > 0;",
				"\tmesh.renderOrder = 110;",
				"",
				"\tmesh.position.x = r * x;",
				"\tmesh.position.y = y;",
				"\tmesh.position.z = r * z;",
				"\tmesh.rotation.y = - theta;",
				"",
				"\tmesh.scale.x = radius * 0.66;",
				"\tmesh.scale.y = radius * 0.66;",
				"\tmesh.scale.z = radius * 0.66;",
				"",
				"\tvar section = y > 0 ? 'top' : 'bottom';",
				"\tvar vertices = circle.vertices[ section ];",
				"",
				"\tx *= r * 0.85;",
				"\tz *= r * 0.85;",
				"",
				"\tvertices.push( x, y, z );",
				"",
				"\tif ( i > 0 ) {",
				"",
				"\t\t// Tick Mark",
				"\t\tpct = ( i + 0.5 ) / amount;",
				"\t\ttheta = pct * Math.PI * 2;",
				"\t\t",
				"\t\tvar tx = Math.cos( theta );",
				"\t\tvar tz = Math.sin( theta );",
				"",
				"\t\tvertices.push( ( r * 0.85 - 0.5 ) * tx, y, ( r * 0.85 - 0.5 ) * tz );",
				"\t\tvertices.push( ( r * 0.85 + 4.5 ) * tx, y, ( r * 0.85 + 4.5 ) * tz );",
				"",
				"\t\t// Double up because they are line segments",
				"\t\tvertices.push( x, y, z );",
				"",
				"\t\t// Make last point go back to first point",
				"\t\t// in the circle",
				"\t\tif ( i >= amount - 1 ) {",
				"",
				"\t\t\tcircle.vertices[ section ] = vertices.concat(",
				"\t\t\t\tvertices.slice( 0, 3 ) );",
				"",
				"\t\t\tvertices = circle.vertices[ section ];",
				"",
				"\t\t\t// Final Tick Mark",
				"\t\t\tpct = ( i + 1 + 0.5 ) / amount;",
				"\t\t\ttheta = pct * Math.PI * 2;",
				"",
				"\t\t\tvar tx = Math.cos( theta );",
				"\t\t\tvar tz = Math.sin( theta );",
				"",
				"\t\t\tvertices.push( ( r * 0.85 - 0.5 ) * tx, y, ( r * 0.85 - 0.5 ) * tz );",
				"\t\t\tvertices.push( ( r * 0.85 + 4.5 ) * tx, y, ( r * 0.85 + 4.5 ) * tz );",
				"",
				"\t\t}",
				"",
				"\t}",
				"",
				"\tgroup.add( mesh );",
				"",
				"\trenderer.render( scene, camera );",
				"",
				"\trequestAnimationFrame( function() {",
				"\t\tcreateCard( wid + 1 );",
				"\t} );",
				"",
				"}",
				"",
				"function updateText( text ) {",
				"",
				"\tvar two = new Two( {",
				"\t\ttype: Two.Types.canvas,",
				"\t\twidth: 128,",
				"\t\theight: 128,",
				"\t\tratio: 2",
				"\t} ).appendTo( document.body );",
				"",
				"\ttwo.scene.translation.set( two.width / 2, two.height / 2 );",
				"\ttwo.scene.rotation = Math.PI / 2;",
				"",
				"\tvar message = two.makeText('', 0, 0, {",
				"\t\tfamily: 'alternate-gothic-no-3-d, sans-serif',",
				"\t\tweight: 400,",
				"\t\tsize: 13,",
				"\t\tleading: 0,",
				"\t\tbaseline: 'middle'",
				"\t} );",
				"\tmessage.noFill();",
				"\tmessage.stroke = '#000';",
				"",
				"\tmessage.value = text;",
				"\tmessage.scale = 1;  // Reset",
				"",
				"    var rect = message.getBoundingClientRect( true );",
				"    var scale = Math.min( two.width / rect.width, two.height / rect.height );",
				"",
				"\tscale *= 0.75;",
				"",
				"    message.scale = scale;",
				"    message.linewidth = 1 / scale;",
				"",
				"\ttwo.update();",
				"",
				"\treturn two.renderer.domElement;",
				"",
				"}",
				"",
				"function createCircle() {",
				"",
				"\tvar vertices = circle.vertices.top.concat( circle.vertices.bottom );",
				"\tvar attribute = new THREE.Float32BufferAttribute( vertices, 3 );",
				"\tcircle.geometry.addAttribute( 'position', attribute );",
				"",
				"\tcircle = new THREE.LineSegments( circle.geometry, circle.material );",
				"\tgroup.add( circle );",
				"",
				"}",
				"",
				"function useDefaultStyles( callback ) {",
				"",
				"\tvar queue = resources.queue();",
				"\tvar link = document.createElement( 'link' );",
				"\tlink.onload = function() {",
				"\t\tupdateText( 'force ctx text' );",
				"\t\tsetTimeout( function() {",
				"\t\t\tif ( callback ) {",
				"\t\t\t\tcallback();",
				"\t\t\t}",
				"\t\t\tqueue();",
				"\t\t}, 1000 );",
				"\t};",
				"  \tlink.setAttribute( 'rel', 'stylesheet' );",
				"  \tlink.setAttribute( 'href', '//use.typekit.net/cjj0tob.css' );",
				"",
				"\tdocument.head.appendChild(link);",
				"",
				"}",
				"",
				"scene.add( group );",
				"resources.set( 'lyrics', group );"
			]
		],
		[
			"Logo",
			[
				"var scene = resources.get( 'scene' );",
				"var loader = new THREE.TextureLoader();",
				"",
				"var group = new THREE.Group();",
				"",
				"var geometry = new THREE.PlaneBufferGeometry( 5, 5, 1, 1 );",
				"var material = new THREE.MeshBasicMaterial( {",
				"\tcolor: 'white',",
				"\twireframe: false,",
				"\ttransparent: true,",
				"\tmap: loader.load( '../assets/textures/ghostly.png' ),",
				"\tdepthTest: false,",
				"\tside: THREE.DoubleSide",
				"} );",
				"",
				"var top = new THREE.Mesh( geometry, material );",
				"var bottom = new THREE.Mesh( geometry, material );",
				"",
				"top.position.y = 150;",
				"bottom.position.y = - 150;",
				"",
				"top.rotation.x = Math.PI / 2;",
				"bottom.rotation.x = Math.PI / 2;",
				"",
				"group.add( top );",
				"group.add( bottom );",
				"group.rotation.y = - 0.5 * Math.PI;",
				"",
				"scene.add( group );",
				"",
				"resources.set( 'logo', group );"
			]
		],
		[
			"VJ Features",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var backdrop = resources.get( 'backdrop' );",
				"var playhead = resources.get( 'playhead' );",
				"var paddles = resources.get( 'paddles' );",
				"var lights = resources.get( 'lights' );",
				"",
				"// In millis",
				"var duration = 350;",
				"var vector = new THREE.Vector3();",
				"",
				"// In ascending order to match playhead line",
				"var palette = [",
				"\t{",
				"\t\tname: 'blue',",
				"\t\tsource: 0x6473aa,",
				"\t\ttarget: 0x8ba4ff",
				"\t},",
				"\t{",
				"\t\tname: 'green',",
				"\t\tsource: 0x63a987,",
				"\t\ttarget: 0xc7ff96",
				"\t},",
				"\t{",
				"\t\tname: 'neutral',",
				"\t\tsource: 0xc8c8c8,",
				"\t\ttarget: 0x141414",
				"\t},",
				"\t{",
				"\t\tname: 'orange',",
				"\t\tsource: 0xff9d00,",
				"\t\ttarget: 0xffd896",
				"\t},",
				"\t{",
				"\t\tname: 'red',",
				"\t\tsource: 0xff3333,",
				"\t\ttarget: 0xf0c8c8",
				"\t}",
				"];",
				"",
				"playhead.addEventListener( 'drag', drag );",
				"",
				"for ( var j = 0; j < paddles.children.length; j++ ) {",
				"",
				"\tvar paddle = paddles.children[ j ];",
				"",
				"\tif ( !paddle.userData.isPaddle ) {",
				"\t\tcontinue;",
				"\t}",
				"",
				"\tpaddle.addEventListener( 'focus', focus );",
				"\tpaddle.addEventListener( 'blur', blur );",
				"",
				"}",
				"",
				"function drag ( e ) {",
				"",
				"\tvar line = e.line;",
				"\tvar pct = ( 2 + line ) / 5;",
				"\tvar index = Math.floor( pct * palette.length );",
				"",
				"\tvar color = palette[ index ];",
				"",
				"\tbackdrop.userData.setSourceColor( color.source );",
				"\tbackdrop.userData.setTargetColor( color.target );",
				"",
				"}",
				"",
				"function focus ( e ) {",
				"",
				"\tvar paddle = this;",
				"\tvar controller = e.controller;",
				"\tvar ambient = lights.userData.ambient;",
				"",
				"\tvector.setFromMatrixPosition( paddle.matrixWorld );",
				"",
				"\tfor ( var i = 0; i < lights.children.length; i++ ) {",
				"\t\tvar light = lights.children[ i ];",
				"\t\tlight.target.userData.reference = paddle;",
				"\t}",
				"",
				"\tfor ( var j = 0; j < manager.filters.list.length; j++ ) {",
				"\t\tvar filter = manager.filters.list[ j ];",
				"\t\tif ( filter.name === paddle.userData.name ) {",
				"\t\t\tfilter.node.gain.value = 1;",
				"\t\t} else {",
				"\t\t\tfilter.node.gain.value = 0.01;",
				"\t\t}",
				"\t}",
				"",
				"\tvar options = { intensity: 0.45 };",
				"\tambient.userData.tween.to( options, duration );",
				"\tambient.userData.tween.start();",
				"",
				"}",
				"",
				"function blur ( e ) {",
				"",
				"\tvar paddle = this;",
				"\tvar controller = e.controller;",
				"\tvar ambient = lights.userData.ambient;",
				"",
				"\tfor ( var i = 0; i < lights.children.length; i++ ) {",
				"\t\tvar light = lights.children[ i ];",
				"\t\tlight.target.userData.reference = lights;",
				"\t}",
				"",
				"\tfor ( var j = 0; j < manager.filters.list.length; j++ ) {",
				"\t\tvar filter = manager.filters.list[ j ];",
				"\t\tfilter.node.gain.value = 1;",
				"\t}",
				"",
				"\tvar options = { intensity: ambient.userData.intensity };",
				"\tambient.userData.tween.to( options, duration );",
				"\tambient.userData.tween.start();",
				"",
				"}"
			]
		]
	],
	"effects": [
		[
			"Audio Player",
			[
				"var manager = resources.get( 'audio-manager' );",
				"",
				"function start( progress ) {",
				"\tplayer.setAudio( manager );",
				"\tplayer.setLoop( [ 0, manager.duration ] );",
				"}",
				"",
				"function end( progress ) {",
				"\tplayer.setAudio( null );",
				"}",
				"",
				"function update( progress ) {",
				"",
				"\tmanager.update();",
				"\tmanager.updateFFT();",
				"",
				"}"
			]
		],
		[
			"Render",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var renderer = resources.get( 'renderer' );",
				"var interaction = resources.get( 'interaction' );",
				"var carousel = resources.get( 'carousel' );",
				"var backdrop = resources.get( 'backdrop' );",
				"var camera = resources.get( 'camera' );",
				"var scene = resources.get( 'scene' );",
				"var playhead = resources.get( 'playhead' );",
				"var paddles = resources.get( 'paddles' );",
				"var lights = resources.get( 'lights' );",
				"var debris = resources.get( 'debris' );",
				"",
				"var duration = 1;",
				"",
				"playhead.addEventListener( 'drag', onPlayheadDrag );",
				"",
				"function start( progress ) {",
				"\tduration = manager.duration;",
				"}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"",
				"\tvar isPresenting = renderer.vr.isPresenting();",
				"",
				"\tTWEEN.update();",
				"",
				"\tvar orbit = camera.userData.controls;",
				"\tvar orbitState = !orbit ? - 1 : orbit.getState();",
				"",
				"\tif ( orbitState < 0 ) {",
				"\t\tinteraction.update();",
				"\t}",
				"",
				"\tbackdrop.userData.update( progress, lights.userData.ambient.intensity );",
				"\tplayhead.userData.update( progress );",
				"\tpaddles.userData.update( progress );",
				"\tlights.userData.update( progress );",
				"",
				"\t// Uniforms",
				"\tdebris.material.uniforms.time.value = 1000 * progress * duration;",
				"",
				"\tvar interacting = interaction.hasIntersections();",
				"",
				"\tif ( orbit ) {",
				"\t\tif ( isPresenting || interacting ) {",
				"\t\t\torbit.enabled = false;",
				"\t\t} else {",
				"\t\t\torbit.enabled = true;",
				"\t\t\torbit.update();",
				"\t\t}",
				"\t}",
				"",
				"\trenderer.render( scene, camera );",
				"",
				"}",
				"",
				"function onPlayheadDrag( event ) {",
				"",
				"\tvar progress = event.progress;",
				"",
				"\tplayer.currentTime = progress * manager.duration;",
				"",
				"\tvar line = event.line;",
				"\tvar rate = 1;",
				"",
				"\tswitch ( line ) {",
				"\t\tcase - 2:",
				"\t\t\trate = 0.33;",
				"\t\t\tbreak;",
				"\t\tcase - 1:",
				"\t\t\trate = 0.66;",
				"\t\t\tbreak;",
				"\t\tcase 0:",
				"\t\t\trate = 1;",
				"\t\t\tbreak;",
				"\t\tcase 1:",
				"\t\t\trate = 1.5;",
				"\t\t\tbreak;",
				"\t\tcase 2:",
				"\t\t\trate = 2;",
				"\t\t\tbreak;",
				"\t\tdefault:",
				"\t\t\trate = 1;",
				"\t}",
				"",
				"\tplayer.playbackRate = rate;",
				"",
				"}"
			]
		],
		[
			"Set Backdrop Gray",
			[
				"var parameters = {",
				"\tsource: new FRAME.Parameters.Vector3( 'Source Color', [ 200, 200, 200 ] ),",
				"\ttarget: new FRAME.Parameters.Vector3( 'Target Color', [ 20, 20, 20 ] )",
				"};",
				"var backdrop = resources.get( 'backdrop' );",
				"",
				"var black = new THREE.Color( 0, 0, 0 );",
				"var source = new THREE.Color();",
				"var target = new THREE.Color();",
				"",
				"var sourceStart = new THREE.Color();",
				"var targetStart = new THREE.Color();",
				"",
				"function start( progress ) {",
				"",
				"\tvar color;",
				"\tvar userData = backdrop.userData;",
				"",
				"\tcolor = parameters.source.value;",
				"\tsource.setRGB( color[ 0 ] / 255, color[ 1 ] / 255, color[ 2 ] / 255 );",
				"",
				"\tcolor = parameters.target.value;",
				"\ttarget.setRGB( color[ 0 ] / 255, color[ 1 ] / 255, color[ 2 ] / 255 );",
				"\t",
				"\tsourceStart.copy( userData.cSource );",
				"\ttargetStart.copy( userData.cTarget );",
				"",
				"}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"",
				"\tvar uniforms = backdrop.material.uniforms;",
				"\tvar userData = backdrop.userData;",
				"",
				"\tprogress = TWEEN.Easing.Back.Out( progress );",
				"",
				"\tuserData.cSource.copy( sourceStart ).lerp( source, progress );",
				"\tuserData.cTarget.copy( targetStart ).lerp( target, progress );",
				"",
				"}"
			]
		],
		[
			"Apply Stem FFT to Bones ",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var ring = resources.get( 'ring' );",
				"",
				"function start( progress ){}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"",
				"\tvar root = ring.userData.root;",
				"\tvar bones = root.children;",
				"",
				"\tvar analysers = manager.analysers.list;",
				"\tvar bandwidth = 0;",
				"",
				"\tfor ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\t\tvar pct = i / bones.length;",
				"\t\tvar t = pct * analysers.length;",
				"\t\tvar u = Math.floor( t );",
				"\t\tvar v = Math.ceil( t ) % analysers.length;",
				"\t\tvar offset = t % 1;",
				"",
				"\t\tvar bone = bones[ i ];",
				"\t\t",
				"\t\tvar du = analysers[ u ].data;",
				"\t\tvar dv = analysers[ v ].data;",
				"\t\t",
				"\t\tvar au = du[ bandwidth ];",
				"\t\tvar av = dv[ bandwidth ];",
				"",
				"\t\tvar amplitude = lerp( au, av, offset ) / 255;",
				"\t\tvar scale = 0.5 * amplitude + 0.5;",
				"",
				"\t\t// Ease into values",
				"\t\tbone.scale.x += ( 1 - bone.scale.x ) * 0.66;",
				"\t\tbone.scale.y += ( scale - bone.scale.y ) * 0.66;",
				"\t\tbone.scale.z += ( 1 - bone.scale.z ) * 0.66;",
				"",
				"\t}",
				"",
				"}",
				"",
				"function lerp( a, b, t ) {",
				"\treturn ( b - a ) * t + a;",
				"}"
			]
		],
		[
			"Set Playhead Scale",
			[
				"var playhead = resources.get( 'playhead' );",
				"",
				"function start( progress ) {",
				"\tplayhead.visible = true;",
				"\tplayhead.scale.x = 0.01;",
				"\tplayhead.scale.y = 0.01;",
				"\tplayhead.scale.z = 0.01",
				"}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"\tprogress = TWEEN.Easing.Elastic.Out( progress ) + 0.01;",
				"\tplayhead.scale.x = progress;",
				"\tplayhead.scale.y = progress;",
				"\tplayhead.scale.z = progress;",
				"}"
			]
		],
		[
			"Apply Waveform to Bones: Zig Zag",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var ring = resources.get( 'ring' );",
				"",
				"function start( progress ){}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"",
				"\tvar root = ring.userData.root;",
				"\tvar bones = root.children;",
				"\tvar analyser = manager.analyser;",
				"\tvar time = 10 * progress;",
				"",
				"\tfor ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\t\tvar pct = i / bones.length;",
				"\t\tvar t = pct * analyser.data.length;",
				"\t\tvar u = Math.floor( t );",
				"\t\tvar v = Math.ceil( t ) % analyser.data.length;",
				"\t\tvar offset = t % 1;",
				"",
				"\t\tvar bone = bones[ i ];",
				"\t\t",
				"\t\tvar au = analyser.data[ u ];",
				"\t\tvar av = analyser.data[ v ];",
				"",
				"\t\tvar amplitude = lerp( au, av, offset ) / 255;",
				"\t\tvar theta = i % 2;",
				"\t\tvar phase = 2 * theta - 1;",
				"\t\tvar y = 100 * amplitude * phase;",
				"",
				"\t\tbone.position.y += ( y - bone.position.y ) * 0.33;",
				"",
				"\t}",
				"",
				"}",
				"",
				"function lerp( a, b, t ) {",
				"\treturn ( b - a ) * t + a;",
				"}"
			]
		],
		[
			"Apply Waveform to Bones Over Time",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var ring = resources.get( 'ring' );",
				"",
				"function start( progress ){}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ) {",
				"",
				"\tvar root = ring.userData.root;",
				"\tvar bones = root.children;",
				"\tvar analyser = manager.analyser;",
				"\tvar time = progress * 100 / 8;",
				"\tvar transition = Math.sin( progress * Math.PI );",
				"\tvar phi = Math.PI * 12 * Math.sin( time * 2 );",
				"\t",
				"\tfor ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\t\tvar pct = ( i / bones.length + time ) % 1;",
				"\t\tvar bone = bones[ i ];",
				"\t\tvar amplitude = 75 * analyser.data[ 0 ] / 255;",
				"\t\tvar phase = Math.sin( pct * phi );",
				"\t\tvar y = transition * amplitude * phase;",
				"",
				"\t\tbone.position.y += ( y - bone.position.y ) * 0.125;",
				"",
				"\t}",
				"",
				"}",
				"",
				"function lerp( a, b, t ) {",
				"\treturn ( b - a ) * t + a;",
				"}"
			]
		],
		[
			"Apply Stem FFT to Bones Extreme",
			[
				"var manager = resources.get( 'audio-manager' );",
				"var ring = resources.get( 'ring' );",
				"",
				"function start( progress ){}",
				"",
				"function end( progress ) {",
				"",
				"\tvar root = ring.userData.root;",
				"\tvar bones = root.children;",
				"",
				"\tfor ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\t\tvar bone = bones[ i ];",
				"",
				"\t\tbone.scale.y = 1;",
				"\t\tbone.scale.x = 1;",
				"\t\tbone.scale.z = 1;",
				"",
				"\t}",
				"",
				"}",
				"",
				"function update( progress ) {",
				"",
				"\tvar root = ring.userData.root;",
				"\tvar bones = root.children;",
				"",
				"\tvar analysers = manager.analysers.list;",
				"\tvar bandwidth = 0;",
				"",
				"\tfor ( var i = 0; i < bones.length; i++ ) {",
				"",
				"\t\tvar pct = i / bones.length;",
				"\t\tvar t = pct * analysers.length;",
				"\t\tvar u = Math.floor( t );",
				"\t\tvar v = Math.ceil( t ) % analysers.length;",
				"\t\tvar offset = t % 1;",
				"",
				"\t\tvar bone = bones[ i ];",
				"\t\t",
				"\t\tvar du = analysers[ u ].data;",
				"\t\tvar dv = analysers[ v ].data;",
				"\t\t",
				"\t\tvar au = du[ bandwidth ];",
				"\t\tvar av = dv[ bandwidth ];",
				"",
				"\t\tvar amplitude = lerp( au, av, offset ) / 255;",
				"\t\tvar scale = 0.9 * amplitude + 0.1;",
				"",
				"\t\t// Ease into values",
				"\t\tbone.scale.y += ( scale - bone.scale.y ) * 0.66;",
				"\t\tbone.scale.x = bone.scale.y;",
				"\t\tbone.scale.z = bone.scale.y;",
				"",
				"\t}",
				"",
				"}",
				"",
				"function lerp( a, b, t ) {",
				"\treturn ( b - a ) * t + a;",
				"}"
			]
		],
		[
			"Set Default Camera",
			[
				"var camera = resources.get( 'camera' );",
				"var renderer = resources.get( 'renderer' );",
				"",
				"function start( progress ) {",
				"",
				"\tcamera.position.y = 1.3;",
				"\tcamera.position.z = 10;",
				"",
				"\tif ( !camera.userData.controls ) {",
				"\t\tcamera.userData.controls = new THREE.OrbitControls(",
				"\t\t\tcamera, renderer.domElement );",
				"\t\tcamera.userData.controls.enableDamping = true;",
				"\t\tcamera.userData.controls.maxDistance = 1000;",
				"\t\tcamera.userData.controls.dampingFactor = 0.16;",
				"\t}",
				"",
				"}",
				"",
				"function end( progress ){}",
				"",
				"function update( progress ){}"
			]
		]
	],
	"animations": [
		[
			"Audio",
			0,
			175.98899999999998,
			0,
			0,
			true
		],
		[
			"Backdrop Reveal",
			0,
			5,
			1,
			2,
			true
		],
		[
			"Ring Morph Scale",
			0,
			29,
			2,
			3,
			true
		],
		[
			"Video",
			0,
			175.98899999999998,
			5,
			1,
			true
		],
		[
			"Editor View",
			0,
			10,
			6,
			8,
			true
		],
		[
			"Playhead Reveal",
			10,
			11,
			1,
			4,
			true
		],
		[
			"Ring Morph Wave",
			12,
			115,
			1,
			6,
			true
		],
		[
			"Ring Morph Scale",
			56,
			80,
			2,
			7,
			true
		],
		[
			"Ring Morph Position",
			133.5,
			175.98899999999998,
			2,
			5,
			true
		]
	]
}
